<!DOCTYPE html>
<html lang="en">
    <head>
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <title>Model Transformation API | Fluid Infusion</title>
        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/foundation.css">
        <link rel="stylesheet" href="css/highlightjs-custom.css">
        <link rel="stylesheet" href="css/octicons.css">
        <link rel="stylesheet" type="text/css" href="lib/infusion/src/framework/preferences/css/Enactors.css" />
        <link rel="stylesheet" type="text/css" href="lib/infusion/src/framework/preferences/css/PrefsEditor.css" />
        <link rel="stylesheet" type="text/css" href="lib/infusion/src/framework/preferences/css/SeparatedPanelPrefsEditor.css" />
        <link rel="stylesheet" href="css/infusion-docs.css">

        <link rel="icon" type="image/png" href="images/favico.png">

        <script type="text/javascript" src="lib/infusion/infusion-uiOptions.js"></script>
        <script type="text/javascript" src="js/infusion-docs.js"></script>

    </head>
    <body class="infusion-docs fl-theme-prefsEditor-default">

        <div class="container infusion-docs-container">

            <!-- Skip Link -->
            <div id="skip">
                <a href="#tableOfContents">Jump to Table of Contents</a>
                <a href="#content">Skip to Content</a>
            </div>
            <!-- END skip link -->

            <!-- BEGIN markup for Preference Editor -->
            <div class="flc-prefsEditor-separatedPanel fl-prefsEditor-separatedPanel">
                <!-- This is the div that will contain the Preference Editor component -->
                <div class="flc-slidingPanel-panel flc-prefsEditor-iframe"></div>

                <!-- This div is for the sliding panel that shows and hides the Preference Editor controls -->
                <div class="fl-panelBar">
                    <span class="fl-prefsEditor-buttons">
                        <button id="reset" class="flc-prefsEditor-reset fl-prefsEditor-reset"><span class="fl-icon-undo"></span> Reset</button>
                        <button id="show-hide" class="flc-slidingPanel-toggleButton fl-prefsEditor-showHide">+ Show Display Preferences</button>
                    </span>
                </div>
            </div>

            <script type="text/javascript">
                fluid.uiOptions.prefsEditor(".flc-prefsEditor-separatedPanel", {
                    terms: {
                        "templatePrefix": "lib/infusion/src/framework/preferences/html",
                        "messagePrefix": "lib/infusion/src/framework/preferences/messages"
                    },
                    "tocTemplate": "lib/infusion/src/components/tableOfContents/html/TableOfContents.html"
                });
            </script>

            <!-- END markup for Preference Editor -->

            <header class="row infusion-docs-header">
                <div class="infusion-docs-fluidLogo small-12 medium-3 column">
                    <a class="infusion-docs-fluidLogoText" href="index.html" title="Infusion">infusion</a>
                </div>

                <nav class="infusion-docs-fluidCategories small-12 medium-9 column">
                    
                    
                        
                            <a href="index.html" title="Infusion" class="infusion-docs-category-active">Infusion</a>
                        
                    
                        
                            <a href="index-tutorials.html" title="Tutorials">Tutorials</a>
                        
                    
                        
                            <a href="index-components.html" title="Components">Components</a>
                        
                    
                </nav>
            </header>

            <div class="infusion-docs-mainBody">
                <nav id="tableOfContents" class="infusion-docs-TOC small-12 medium-3 column" tabindex="-1">
                    
                        
                        
                            <span class="infusion-docs-category">Infusion</span>
                            
                                <span class="infusion-docs-sectionName">Writing Configuration</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="UnderstandingInfusionComponents.html"><span class="infusion-docs-TOC-pageName">Understanding Infusion Components</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ComponentOptionsAndDefaults.html"><span class="infusion-docs-TOC-pageName">Understanding Component Options And Defaults</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ComponentConfigurationOptions.html"><span class="infusion-docs-TOC-pageName">Component Configuration Options</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ComponentGrades.html"><span class="infusion-docs-TOC-pageName">Component Grades</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="FunctionGrades.html"><span class="infusion-docs-TOC-pageName">Function Grades</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="OptionsMerging.html"><span class="infusion-docs-TOC-pageName">Options Merging</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ComponentLifecycle.html"><span class="infusion-docs-TOC-pageName">Component Lifecycle</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="Priorities.html"><span class="infusion-docs-TOC-pageName">Priorities</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="FrameworkConcepts.html"><span class="infusion-docs-TOC-pageName">Framework Concepts</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">API</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="CoreAPI.html"><span class="infusion-docs-TOC-pageName">Core API</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="PromisesAPI.html"><span class="infusion-docs-TOC-pageName">Promises API</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="IoCAPI.html"><span class="infusion-docs-TOC-pageName">IoC API</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ChangeApplierAPI.html"><span class="infusion-docs-TOC-pageName">ChangeApplier API</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <span class="infusion-docs-TOC-pageName">Model Transformation API</span>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ViewAPI.html"><span class="infusion-docs-TOC-pageName">View API</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="DOMBinderAPI.html"><span class="infusion-docs-TOC-pageName">DOM Binder API</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="NodeAPI.html"><span class="infusion-docs-TOC-pageName">node.js Support and API</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">Inversion of Control</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="HowToUseInfusionIoC.html"><span class="infusion-docs-TOC-pageName">How to Use Infusion IoC</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="SubcomponentDeclaration.html"><span class="infusion-docs-TOC-pageName">Subcomponent Declaration</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="Contexts.html"><span class="infusion-docs-TOC-pageName">Contexts</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ContextAwareness.html"><span class="infusion-docs-TOC-pageName">ContextAwareness</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="Invokers.html"><span class="infusion-docs-TOC-pageName">Invokers</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ExpansionOfComponentOptions.html"><span class="infusion-docs-TOC-pageName">Expansion of Component Options</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="IoCReferences.html"><span class="infusion-docs-TOC-pageName">IoC References</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="IoCSS.html"><span class="infusion-docs-TOC-pageName">IoCSS</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="DeclarativeThisismInIoC.html"><span class="infusion-docs-TOC-pageName">Declarative this-ism In IoC</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">Events</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="InfusionEventSystem.html"><span class="infusion-docs-TOC-pageName">Infusion Event System</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="EventInjectionAndBoiling.html"><span class="infusion-docs-TOC-pageName">Event injection and boiling</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">Models</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="ChangeApplier.html"><span class="infusion-docs-TOC-pageName">ChangeApplier</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ChangeApplierAPI.html"><span class="infusion-docs-TOC-pageName">ChangeApplier API</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ModelRelay.html"><span class="infusion-docs-TOC-pageName">Model Relay</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">Views</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="DOMBinder.html"><span class="infusion-docs-TOC-pageName">DOM Binder</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="DOMBinderAPI.html"><span class="infusion-docs-TOC-pageName">DOM Binder API</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ClassNameConventions.html"><span class="infusion-docs-TOC-pageName">Class Name Conventions</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">Renderer</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="Renderer.html"><span class="infusion-docs-TOC-pageName">Renderer</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="HowToUseTheRenderer.html"><span class="infusion-docs-TOC-pageName">How to Use the Renderer</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="RendererComponentTrees.html"><span class="infusion-docs-TOC-pageName">Renderer Component Trees</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ProtoComponentTypes.html"><span class="infusion-docs-TOC-pageName">ProtoComponent Types</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="RendererComponentTreeExpanders.html"><span class="infusion-docs-TOC-pageName">Renderer Component Tree Expanders</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="Cutpoints.html"><span class="infusion-docs-TOC-pageName">Cutpoints</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="RendererComponents.html"><span class="infusion-docs-TOC-pageName">Renderer Components</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="RendererDecorators.html"><span class="infusion-docs-TOC-pageName">Renderer Decorators</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">Loading Resources</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="ResourceLoader.html"><span class="infusion-docs-TOC-pageName">Resource Loader</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="FetchResources.html"><span class="infusion-docs-TOC-pageName">fluid.fetchResources</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">Preferences Framework</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="PreferencesFramework.html"><span class="infusion-docs-TOC-pageName">Preferences Framework</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="PreferencesEditor.html"><span class="infusion-docs-TOC-pageName">Preferences Editor</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="Builder.html"><span class="infusion-docs-TOC-pageName">Builder</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="PrimarySchemaForPreferencesFramework.html"><span class="infusion-docs-TOC-pageName">Primary Schema</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="AuxiliarySchemaForPreferencesFramework.html"><span class="infusion-docs-TOC-pageName">Auxiliary Schema</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="SettingsStore.html"><span class="infusion-docs-TOC-pageName">Settings Store</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ConnectingThePartsOfAPreferencesEditor.html"><span class="infusion-docs-TOC-pageName">Connecting the Parts of a Preferences Editor</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="Enactors.html"><span class="infusion-docs-TOC-pageName">Enactors</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="Panels.html"><span class="infusion-docs-TOC-pageName">Panels</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="CompositePanels.html"><span class="infusion-docs-TOC-pageName">Composite Panels</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="ConditionalSubpanels.html"><span class="infusion-docs-TOC-pageName">Conditional Subpanels</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="LocalizationInThePreferencesFramework.html"><span class="infusion-docs-TOC-pageName">Localization in the Preferences Framework</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">Testing</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="jqUnit.html"><span class="infusion-docs-TOC-pageName">Unit Testing with jqUnit</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="IoCTestingFramework.html"><span class="infusion-docs-TOC-pageName">IoC Testing Framework</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">Migrating to Infusion 1.5</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="APIChangesFrom1_4To1_5.html"><span class="infusion-docs-TOC-pageName">API Changes from 1.4 to 1.5</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="DeprecationsIn1_5.html"><span class="infusion-docs-TOC-pageName">Deprecations In 1.5</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="tutorial-migratingToInfusion1.5/UIOptionsMigration.html"><span class="infusion-docs-TOC-pageName">UI Options Migration</span></a>
                                            
                                        </li>
                                    
                                        <li>
                                            
                                                <a href="tutorial-migratingToInfusion1.5/PagerMigration.html"><span class="infusion-docs-TOC-pageName">Pager Migration</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                                <span class="infusion-docs-sectionName">Migrating to Infusion 2.0</span>
                                <ul>
                                    
                                        <li>
                                            
                                                <a href="APIChangesFrom1_5To2_0.html"><span class="infusion-docs-TOC-pageName">API Changes from 1.5 to 2.0</span></a>
                                            
                                        </li>
                                    
                                </ul>
                            
                        
                    
                        
                        
                    
                        
                        
                    
                </nav>

                <article id="content" class="infusion-docs-mainContent small-12 medium-9 column" tabindex="-1">
                    <div class="infusion-docs-articleContainer">

                        <div class="flc-toc-tocContainer infusion-docs-toc"> </div>

                        <h1>Model Transformation API</h1>

                        <p class="infusion-docs-githubLink"><a href="https://github.com/fluid-project/infusion-docs/blob/master/src/documents/ModelTransformationAPI.md" target="_blank">Edit on GitHub</a></p>

                        

                        <div class="infusion-docs-articleBody">
                            <p>The <strong><em>model transformation</em></strong> framework is a core part of Infusion and allows you to transform an input <a href="FrameworkConcepts.html#model-objects">model</a> (JSON structure) based on a set of rules.
The result will be a new model, built according to the rules specified and the input model. Many kinds of transformation can also have their <em>inverses</em> computed
and operated automatically.</p>
<p>Any model transformation can be supplied as part of a <a href="ModelRelay.html#explicit-model-relay-style">model relay</a> rule registered in a <a href="ComponentConfigurationOptions.html#model-components">fluid.modelComponent</a>&#39;s <code>modelRelay</code>
block - the system will then constantly operate the transformation rule whenever there is a model change to keep the linked model in sync. Note that the modelRelay system does <strong><em>not</em></strong> support <code>xxxPath</code> style inputs, and steer towards the use of SingleTransform rather than full transforms. For more information, see the documentation on <a href="ModelRelay.html">model relay</a>.</p>
<p>The user may also operate model transformation rules manually by use of the
<code>fluid.model.transformWithRules</code> API (see <a href="ModelTransformationAPI.html#fluidmodeltransformwithrulessource-rules-options">below</a>).</p>
<h2 id="list-of-available-transformations">List of available transformations</h2>
<p>Below is a list of all the available transformations in the framework. For details on each, see the individual description in the <a href="ModelTransformationAPI.html#transformation-functions">Transformation Functions</a> section.</p>
<ul>
<li><a href="ModelTransformationAPI.html#output-a-value-given-as-input-fluid-transforms-value-and-fluid-transforms-identity-">fluid.transforms.value</a></li>
<li><a href="ModelTransformationAPI.html#output-a-value-given-as-input-fluid-transforms-value-and-fluid-transforms-identity-">fluid.transforms.identity</a></li>
<li><a href="ModelTransformationAPI.html#literal-value-fluid-transforms-literalvalue-">fluid.transforms.literalValue</a></li>
<li><a href="ModelTransformationAPI.html#fluid-transforms-stringtonumber">fluid.transforms.stringToNumber</a></li>
<li><a href="ModelTransformationAPI.html#fluid-transforms-numbertostring">fluid.transforms.numberToString</a></li>
<li><a href="ModelTransformationAPI.html#count-length-of-array-fluid-transforms-count-">fluid.transforms.count</a></li>
<li><a href="ModelTransformationAPI.html#round-a-floating-point-number-fluid-transforms-round-">fluid.transforms.round</a></li>
<li><a href="ModelTransformationAPI.html#delete-path-from-the-output-fluid-transforms-delete-">fluid.transforms.delete</a></li>
<li><a href="ModelTransformationAPI.html#get-first-value-of-array-fluid-transforms-firstvalue-">fluid.transforms.firstValue</a></li>
<li><a href="ModelTransformationAPI.html#scale-value-with-optional-offset-fluid-transforms-linearscale-">fluid.transforms.linearScale</a></li>
<li><a href="ModelTransformationAPI.html#binary-operation-fluid-transforms-binaryop-">fluid.transforms.binaryOp</a></li>
<li><a href="ModelTransformationAPI.html#conditional-transform-fluid-transforms-condition-">fluid.transforms.condition</a></li>
<li><a href="ModelTransformationAPI.html#mapping-based-on-input-value-fluid-transforms-valuemapper-">fluid.transforms.valueMapper</a></li>
<li><a href="ModelTransformationAPI.html#mapping-a-continuous-range-into-discrete-values-fluid-transforms-quantize-">fluid.transforms.quantize</a></li>
<li><a href="ModelTransformationAPI.html#check-whether-a-number-is-in-a-given-range-fluid-transforms-inrange-">fluid.transforms.inRange</a></li>
<li><a href="ModelTransformationAPI.html#fluid-transforms-arraytosetmembership">fluid.transforms.arrayToSetMembership</a></li>
<li><a href="ModelTransformationAPI.html#fluid-transforms-setmembershiptoarray">fluid.transforms.setMembershipToArray</a></li>
<li><a href="ModelTransformationAPI.html#creates-an-object-indexed-with-keys-from-array-entries-fluid-transforms-indexarraybykey-">fluid.transforms.indexArrayByKey</a></li>
<li><a href="ModelTransformationAPI.html#create-an-object-indexed-with-keys-from-array-entries-fluid-transforms-deindexintoarraybykey-">fluid.transforms.deindexIntoArrayByKey</a></li>
<li><a href="ModelTransformationAPI.html#get-the-index-of-an-element-in-an-array-fluid-transforms-indexof-">fluid.transforms.indexOf</a></li>
<li><a href="ModelTransformationAPI.html#get-the-value-at-an-index-of-array-fluid-transforms-dereference-">fluid.transforms.dereference</a></li>
<li><a href="ModelTransformationAPI.html#create-string-from-template-fluid-transforms-stringtemplate-">fluid.transforms.stringTemplate</a></li>
<li><a href="ModelTransformationAPI.html#use-any-globally-available-function-as-transform-fluid-transforms-free-">fluid.transforms.free</a></li>
</ul>
<h2 id="fluid-model-transformwithrules-source-rules-options-">fluid.model.transformWithRules(source, rules[, options])</h2>
<p>Function to manually apply transformation rules to a source model. It will return the transformed source model.</p>
<ul>
<li><code>source {Object}</code> The input model to transform - this will not be modified</li>
<li><code>rules {Transform}</code> A transformation rules object containing instructions on how to transform the model (see <a href="#structure-of-a-transformation-document">below</a> for more information)</li>
<li><code>options {Object}</code> A set of options governing the kind of transformation to be operated. At present this may contain the values:<ul>
<li><code>isomorphic {Boolean}</code> If <code>true</code> indicating that the output model is to be governed by the same schema found in the input model, or</li>
<li><code>flatSchema {Object: String -&gt; String}</code> Holding a flat schema object which consists of a hash of EL path specifications with wildcards, to the string values &quot;array&quot;/&quot;object&quot; defining the schema to be used to construct missing trunk values. This option is not part of the official API and might be subject to change.</li>
</ul>
</li>
<li>Returns: <code>{Object}</code> The transformed model</li>
</ul>
<h2 id="structure-of-a-transformation-document">Structure of a transformation document</h2>
<p>The top-level structure of a full transformation document <code>{Transform}</code> is keyed by output <a href="FrameworkConcepts.html#el-paths">EL paths</a> and looks like this:</p>
<pre class="highlight"><code class="hljs lasso">{
    <span class="hljs-subst">&lt;</span>output<span class="hljs-attribute">-el</span><span class="hljs-attribute">-path1</span><span class="hljs-subst">&gt;</span>: <span class="hljs-subst">&lt;</span>input<span class="hljs-attribute">-el</span><span class="hljs-attribute">-path1</span><span class="hljs-subst">&gt;</span> <span class="hljs-literal">OR</span> {SingleTransform},
    <span class="hljs-subst">&lt;</span>output<span class="hljs-attribute">-el</span><span class="hljs-attribute">-path2</span><span class="hljs-subst">&gt;</span>: <span class="hljs-subst">&lt;</span>input<span class="hljs-attribute">-el</span><span class="hljs-attribute">-path2</span><span class="hljs-subst">&gt;</span> <span class="hljs-literal">OR</span> {SingleTransform}
    <span class="hljs-attribute">...</span>
}
</code></pre><p>A <code>{SingleTransform}</code> record is as follows:</p>
<pre class="highlight"><code class="hljs r">{
    transform: {
        <span class="hljs-string">"type"</span>: &lt;transform-type&gt;
        <span class="hljs-keyword">...</span>
    }
}
</code></pre><p>where <code>transform-type</code> is the name of a registered transformation function. This will be a <a href="FunctionGrades.html">function grade</a> derived from the base grade <code>fluid.transformFunction</code>.
Each transformation function can accept arbitrary additional options on the level of the &quot;type&quot; key, but many are derived from the grade <code>fluid.standardInputTransformFunction</code> which accept a standard input value named <code>input</code> (or path named <code>inputPath</code>) and/or derived from the grade <code>fluid.standardOutputTransformFunction</code>
which accepts an output path named <code>outputPath</code>.</p>
<p>In general you should consult the below documentation for each transform function to
see the names and interpretations of its options. Many transforms will themselves accept configuration of type <code>{SingleTransform}</code> in their options, leading transform documents to have a recursive structure.</p>
<h3 id="reserved-words">Reserved words</h3>
<p>The model transformation system contains some reserved words - words which have a special meaning when used as JSON keys.
In general, the reserved words of the model transformation system are:</p>
<table>
<thead>
<tr>
<th style="text-align:left">key</th>
<th style="text-align:left">Reserved in</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>transform</code></td>
<td style="text-align:left"><strong><em>everywhere</em></strong></td>
</tr>
<tr>
<td style="text-align:left"><code>literalValue</code></td>
<td style="text-align:left"><strong><em>everywhere</em></strong></td>
</tr>
<tr>
<td style="text-align:left"><code>type</code></td>
<td style="text-align:left">inside all <code>transform</code> blocks</td>
</tr>
<tr>
<td style="text-align:left"><code>inputPath</code></td>
<td style="text-align:left">inside all <code>standardInputTransformFunctions</code></td>
</tr>
<tr>
<td style="text-align:left"><code>input</code></td>
<td style="text-align:left">inside all <code>standardInputTransformFunctions</code>, <code>fluid.transforms.linearScale</code></td>
</tr>
<tr>
<td style="text-align:left"><code>outputPath</code></td>
<td style="text-align:left">inside all <code>standardOutputTransformFunctions</code>, <code>fluid.transforms.delete</code>, <code>fluid.transforms.valueMapper</code> (match and nomatch directives)</td>
</tr>
<tr>
<td style="text-align:left"><code>values</code></td>
<td style="text-align:left"><code>fluid.transforms.firstValue</code></td>
</tr>
<tr>
<td style="text-align:left"><code>defaultInputPath</code></td>
<td style="text-align:left"><code>fluid.transforms.valueMapper</code> (top level)</td>
</tr>
<tr>
<td style="text-align:left"><code>defaultOutputPath</code></td>
<td style="text-align:left"><code>fluid.transforms.valueMapper</code> (top level)</td>
</tr>
<tr>
<td style="text-align:left"><code>defaultOutputValue</code></td>
<td style="text-align:left"><code>fluid.transforms.valueMapper</code> (top level)</td>
</tr>
<tr>
<td style="text-align:left"><code>match</code></td>
<td style="text-align:left"><code>fluid.transforms.valueMapper</code> (top level)</td>
</tr>
<tr>
<td style="text-align:left"><code>partialMatches</code></td>
<td style="text-align:left">&quot;<code>fluid.transforms.valueMapper</code> (inside <code>match</code>)</td>
</tr>
<tr>
<td style="text-align:left"><code>inputValue</code></td>
<td style="text-align:left"><code>fluid.transforms.valueMapper</code> (inside <code>match</code>)</td>
</tr>
<tr>
<td style="text-align:left"><code>outputValue</code></td>
<td style="text-align:left"><code>fluid.transforms.valueMapper</code> (inside <code>match</code>/<code>noMatch</code>)</td>
</tr>
<tr>
<td style="text-align:left"><code>outputUndefinedValue</code></td>
<td style="text-align:left">&quot;<code>fluid.transforms.valueMapper</code> (inside <code>match</code>/<code>noMatch</code>)</td>
</tr>
<tr>
<td style="text-align:left"><code>left</code></td>
<td style="text-align:left"><code>fluid.transforms.binaryOp</code></td>
</tr>
<tr>
<td style="text-align:left"><code>right</code></td>
<td style="text-align:left"><code>fluid.transforms.binaryOp</code></td>
</tr>
<tr>
<td style="text-align:left"><code>operator</code></td>
<td style="text-align:left"><code>fluid.transforms.binaryOp</code></td>
</tr>
<tr>
<td style="text-align:left"><code>condition</code></td>
<td style="text-align:left"><code>fluid.transforms.condition</code></td>
</tr>
<tr>
<td style="text-align:left"><code>true</code></td>
<td style="text-align:left"><code>fluid.transforms.condition</code></td>
</tr>
<tr>
<td style="text-align:left"><code>false</code></td>
<td style="text-align:left"><code>fluid.transforms.condition</code></td>
</tr>
<tr>
<td style="text-align:left"><code>factor</code></td>
<td style="text-align:left"><code>fluid.transforms.linearScale</code></td>
</tr>
<tr>
<td style="text-align:left"><code>offset</code></td>
<td style="text-align:left"><code>fluid.transforms.linearScale</code></td>
</tr>
<tr>
<td style="text-align:left"><code>ranges</code></td>
<td style="text-align:left"><code>fluid.transforms.quantize</code></td>
</tr>
<tr>
<td style="text-align:left"><code>upperBound</code></td>
<td style="text-align:left">(inside entries of) <code>fluid.transforms.quantize</code></td>
</tr>
<tr>
<td style="text-align:left"><code>output</code></td>
<td style="text-align:left">(inside entries of) <code>fluid.transforms.quantize</code></td>
</tr>
<tr>
<td style="text-align:left"><code>min</code></td>
<td style="text-align:left"><code>fluid.transforms.inRange</code></td>
</tr>
<tr>
<td style="text-align:left"><code>max</code></td>
<td style="text-align:left"><code>fluid.transforms.inRange</code></td>
</tr>
<tr>
<td style="text-align:left"><code>key</code></td>
<td style="text-align:left"><code>fluid.transforms.indexArrayByKey</code>, <code>fluid.transforms.deindexIntoArrayByKey</code></td>
</tr>
<tr>
<td style="text-align:left"><code>innerValue</code></td>
<td style="text-align:left"><code>fluid.transforms.indexArrayByKey</code>, <code>fluid.transforms.deindexIntoArrayByKey</code></td>
</tr>
<tr>
<td style="text-align:left"><code>array</code></td>
<td style="text-align:left"><code>fluid.transforms.indexOf</code>, <code>fluid.transforms.dereference</code></td>
</tr>
<tr>
<td style="text-align:left"><code>notFound</code></td>
<td style="text-align:left"><code>fluid.transforms.indexOf</code>, <code>fluid.transforms.dereference</code></td>
</tr>
<tr>
<td style="text-align:left"><code>offset</code></td>
<td style="text-align:left"><code>fluid.transforms.indexOf</code>, <code>fluid.transforms.dereference</code></td>
</tr>
<tr>
<td style="text-align:left"><code>template</code></td>
<td style="text-align:left"><code>fluid.transforms.stringTemplate</code></td>
</tr>
<tr>
<td style="text-align:left"><code>terms</code></td>
<td style="text-align:left"><code>fluid.transforms.stringTemplate</code></td>
</tr>
<tr>
<td style="text-align:left"><code>func</code></td>
<td style="text-align:left"><code>fluid.transforms.free</code></td>
</tr>
<tr>
<td style="text-align:left"><code>args</code></td>
<td style="text-align:left"><code>fluid.transforms.free</code></td>
</tr>
<tr>
<td style="text-align:left"><code>presentValue</code></td>
<td style="text-align:left"><code>fluid.transforms.arrayToSetMembership</code>, <code>fluid.transforms.setMembershipToArray</code></td>
</tr>
<tr>
<td style="text-align:left"><code>missingValue</code></td>
<td style="text-align:left"><code>fluid.transforms.arrayToSetMembership</code>, <code>fluid.transforms.setMembershipToArray</code></td>
</tr>
<tr>
<td style="text-align:left"><code>options</code></td>
<td style="text-align:left"><code>fluid.transforms.arrayToSetMembership</code>, <code>fluid.transforms.setMembershipToArray</code></td>
</tr>
</tbody>
</table>
<p>Besides these, most transformations have further reserved words. These are briefly listed here, with the transformation(s) they belong to. They will be more fully described for each relevant transformation.</p>
<h2 id="grades-of-transformations">Grades of transformations</h2>
<p>Transformation can be registered with different grades (or types), which define how they handle inputs and outputs. The standard base grades recognized by the framework as follows:</p>
<h3 id="standardinputtransformfunction">standardInputTransformFunction</h3>
<p>These transformations take a single input which can be defined in two ways:</p>
<ul>
<li><code>input</code>: As a constant or nested transform function</li>
<li><code>inputPath</code>: As a path reference to the input (model) by using the key inputPath.</li>
</ul>
<p>If both keys are used in a transform declaration, the value found at the <code>inputPath</code> will be used if something is found there. If not, the transformer will default to using the value defined by <code>input</code>.</p>
<p>More details are given on <code>input</code> and <code>inputPath</code> later in this document.</p>
<h3 id="standardoutputtransformfunction-">standardOutputTransformFunction:</h3>
<p>These transformations only outputs a single value. The value of the output depends on the transformation, but the path to output can be defined by:</p>
<ul>
<li><code>outputPath</code>: An EL path to where the transformation should output its value to.</li>
</ul>
<p>The output path provided here is always relative to the current path. See section on building the output document structure, found further down.</p>
<h3 id="standardtransformfunction-">standardTransformFunction:</h3>
<p>These transformations satisfy the requirements of both <a href="ModelTransformationAPI.html#standardinputtransformfunction"><code>standardInputTransformFunction</code></a> and <a href="ModelTransformationAPI.html#standardoutputtransformfunction"><code>standardOutputTransformFunction</code></a></p>
<h3 id="multiinputtransformfunction-">multiInputTransformFunction:</h3>
<p>These transformations allow for multiple inputs. In their default blocks, besides the gradename, they require an <code>inputVariables</code> key. The value of this should be a hash of key-value pairs, where the key is the variable name and the value is the default value to assign to the variable in case no matching constant or path is found. For each of the variables declared, the system will look up the source-model path defined by <variable>Path in the transform and the <variable> declared in the transform. They will behave in the same way as <code>input</code> and <code>inputPath</code>, where the path takes priority , so the non-path value can be used as fallback if nothing found at the path.</p>
<p>An example of a multiInputTransformFunction declaration:</p>
<pre class="highlight"><code class="hljs avrasm">fluid<span class="hljs-preprocessor">.defaults</span>(<span class="hljs-string">"fluid.transforms.weirdScale"</span>, {
    <span class="hljs-string">"gradeNames"</span>: [ <span class="hljs-string">"fluid.multiInputTransformFunction"</span> ],
    <span class="hljs-string">"inputVariables"</span>: {
        <span class="hljs-string">"factor"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-string">"randomSeed"</span>: <span class="hljs-number">0</span>
    }
})<span class="hljs-comment">;</span>
</code></pre><p>The above declaration defines two input variables; <code>factor</code> and <code>randomSeed</code>. Taking as an example the <code>factor</code>, the first thing that will be looked up in the transform is the value of <code>factorPath</code>. If it is defined, this path will be looked up in the source-model and this will be assigned to factor if found. If it is not found, the value (expanded if necessary) of the &quot;factor&quot; key of the transform will be used if found. If neither is found, the default value of 1 will be assigned to factor.</p>
<p>The inputVariables will be available to fluid.transforms.weirdScale as the first argument in the form of an object keyed by variable names with the values as described above.</p>
<h3 id="combining-standardinputtransformfunction-and-multiinputtransformfunction-">Combining standardInputTransformFunction and multiInputTransformFunction:</h3>
<p>A transformation can have both the grades <code>standardInputTransformFunction</code> and <code>multiInputTransformFunction</code>. This is useful if one has a variable named <code>input</code> (or <code>inputPath</code>) and want to take advantage of the frameworks built in support for <code>standardInputTransformations</code>, but also has other inputs that need supporting. The behavior will be a combination of the <code>standardInputTransformFunction</code> and <code>multiInputTransformFunction</code>. In the below example, the transform function will have three inputs available to resolve, namely <code>factor</code>, <code>offset</code> and <code>input</code> (and their <code>*Path</code> equivalents), with the <code>input</code> not requiring to be expressed in the <code>inputVariables</code> declaration of the defaults block.</p>
<p>The input variables will be available to the <code>fluid.transforms.scaleValue</code> function in the following way: the first argument is the <code>input</code> (as for the <code>standardInputTransformFunction</code>). The remaining variables will be passed as the second argument in the form of an object keyed by variable names with the values as described in the <a href="ModelTransformationAPI.html#multiinputtransformfunction-">multiInputTransformFunction section</a> above.</p>
<pre class="highlight"><code class="hljs avrasm">fluid<span class="hljs-preprocessor">.defaults</span>(<span class="hljs-string">"fluid.transforms.scaleValue"</span>, {
    <span class="hljs-string">"gradeNames"</span>: [ <span class="hljs-string">"fluid.standardTransformFunction"</span>, <span class="hljs-string">"fluid.multiInputTransformFunction"</span> ],
    <span class="hljs-string">"inputVariables"</span>: {
        <span class="hljs-string">"factor"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-string">"offset"</span>: <span class="hljs-number">0</span>
    }
})<span class="hljs-comment">;</span>
</code></pre><h2 id="building-the-output-document-structure">Building the output document structure</h2>
<p>The ultimate goal when using the model transformation is to create an output document with some desired structure and values (based on information in some input document). Therefore it is important to know how to build the output structure of the document. There are different ways of achieving this, and these will be explained below.</p>
<h3 id="keys-in-the-top-level-of-your-document-are-output-el-paths">Keys in the top-level of your document are output el-paths</h3>
<p>All keys at the top level of the transformation rules document are interpreted as output paths. Each subsequent key will also be interpreted as so; until a <code>transform</code> or <code>literalValue</code> keyword is encountered. Anything inside a <code>transform</code> directive is interpreted according to the general transformation rules (see below), and the <code>literalValue</code> keyword results in its content being output to the current output path.</p>
<p><strong><em>Example</em></strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</td><th>rule</th><th>Output</th></tr>
<tr><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">number</span>": <span class="hljs-value"><span class="hljs-number">93.56</span>
    </span>}
</span>}
</code></pre>
</td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">Magnification</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">dataType</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">literalValue</span>": <span class="hljs-value"><span class="hljs-string">"integer"</span>
        </span>}</span>,
        "<span class="hljs-attribute">value</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
                "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.round"</span></span>,
                "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"my.number"</span>
            </span>}
        </span>}
    </span>}
</span>}
</code></pre>
</td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">Magnification</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">dataType</span>": <span class="hljs-value"><span class="hljs-string">"integer"</span>
        <span class="hljs-string">"value"</span>: <span class="hljs-number">94</span>
    </span>}
</span>}
</code></pre>
</td>
</tr>
</tbody>
</table>

<p>In the above example, the output structure is defined via the top-level keys: <code>Magnification</code>, <code>dataType</code> and <code>value</code>. Whenever the transformation system encounters a key, that is a non-reserved word, and that is not inside a <code>transform</code> block, it will consider that a change in the output path / output structure.</p>
<p>So walking through the above rules, the first thing we encounter is <code>Magnification</code>. Since this is not a reserved word, the system will ensure that everything within that block is output relative to the path <code>Magnification</code>. The same goes for <code>dataType</code> - everything inside here will be output relative to the path <code>dataType</code> (which in turn is relative to &quot;Magnification&quot;, giving us the output path: <code>magnification.dataType</code>). <code>literalValue</code> inside dataType is a reserved word, so instead of interpreting this as a change to the output structure, it will be resolved by the model transformation system . The <code>literalValue</code> key, is a way to tell the system to literally print the value to the current output path, which as described above is at this location <code>Magnification.dataType</code>. More information about the <code>literalValue</code> keyword can be found in the below.</p>
<p>Like with <code>dataType</code>, the <code>value</code> key under <code>Magnification</code> means that we change the output path for anything in that block. <code>transform</code> is a keyword, so this does not affect the output path. As previously mentioned, once inside a <code>transform</code> block, keys will no longer be interpreted as output paths. As a result, the <code>type</code> and <code>input</code> will not affect the output path. This means that whatever the result of the rules inside the <code>transform</code> block of the <code>value</code> key block is, they will get output to <code>Magnification.value</code> path. In this case, the value 94.</p>
<h3 id="explicitly-outputting-to-a-relative-path">Explicitly outputting to a (relative) path</h3>
<p>An alternative way to specifying where you want to output values is by using the <code>outputPath</code> key. The value of <code>outputPath</code> defines the relative location where you want to output the result of the transform. <code>outputPath</code> can only be specified in a transform block(i.e. at the same level as the <code>type</code> specification for the transform). <code>outputPath</code> works for most transformations (namely any transform of the grade <code>standardOutputTransformFunction</code> or <code>standardTransformFunction</code>).</p>
<p>Returning to the example in the previous section, this could be written as:</p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">number</span>": <span class="hljs-value"><span class="hljs-number">93.56</span>
    </span>}
</span>}
</code></pre></td><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">[
        {
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.literalValue"</span></span>,
            "<span class="hljs-attribute">input</span>": <span class="hljs-value"><span class="hljs-string">"integer"</span></span>,
            "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"Magnification.dataType"</span>
        </span>}, {
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.round"</span></span>,
            "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"my.number"</span></span>,
            "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"Magnification.value"</span>
        </span>}
    ]
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">Magnification</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">dataType</span>": <span class="hljs-value"><span class="hljs-string">"integer"</span>
        <span class="hljs-string">"value"</span>: <span class="hljs-number">94</span>
    </span>}
</span>}
</code></pre></td>
</tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">number</span>": <span class="hljs-value"><span class="hljs-number">93.56</span>
    </span>}
</span>}
</code></pre></td><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">Magnification</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">transform</span>": <span class="hljs-value">[
            {
                "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.literalValue"</span></span>,
                "<span class="hljs-attribute">input</span>": <span class="hljs-value"><span class="hljs-string">"integer"</span></span>,
                "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"dataType"</span>
            </span>}, {
                "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.round"</span></span>,
                "<span class="hljs-attribute">input</span>": <span class="hljs-value"><span class="hljs-string">"my.number"</span></span>,
                "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"value"</span>
            </span>}
        ]
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">Magnification</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">dataType</span>": <span class="hljs-value"><span class="hljs-string">"integer"</span>
        <span class="hljs-string">"value"</span>: <span class="hljs-number">94</span>
    </span>}
</span>}
</code></pre></td>
</tr>
</tbody>
</table>


<p>Looking at the first example, the <code>literalValue</code> transformation specifies that the result should be output to the path <code>Magnification.dataType</code>. Same for the <code>fluid.transforms.round</code> transform, where the output will be sent to the path <code>Magnification.value</code>.</p>
<p>The second example above, shows how the <code>outputPath</code> will be relative to the current output path. Since the entire block is keyed by <code>Magnification</code>, this becomes the current output path. When we encounter <code>outputPath: dataType</code>, this is interpreted as being relative to the <code>Magnification</code> path, and hence result in the full output path <code>Magnification.dataType</code>.</p>
<h2 id="return-values-arrays-of-transforms-and-outputting-arrays">Return values, Arrays of transforms and outputting arrays</h2>
<h3 id="return-values">Return values</h3>
<p>In general, transformations pass their result one level up, unless <code>outputPath</code> is explicitly given. This is the reason that something like the below works:</p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">display</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">magnification</span>": <span class="hljs-value"><span class="hljs-number">1.5412</span>
    </span>}
</span>}
</code></pre></td><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">Magnification</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.round"</span></span>,
            "<span class="hljs-attribute">input</span>": <span class="hljs-value">{
                "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
                    "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.linearScale"</span></span>,
                    "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"display.magnification"</span></span>,
                    "<span class="hljs-attribute">factor</span>": <span class="hljs-value"><span class="hljs-number">100</span>
                </span>}
            </span>}</span>,
            "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"Percent"</span>
        </span>}
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">Magnification</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">Percent</span>": <span class="hljs-value"><span class="hljs-number">154</span>
    </span>}
</span>}
</code></pre></td>
</tr>
</tbody>
</table>

<p>Here the result of the inner <code>fluid.transforms.linearScale</code> transform is passed to the <code>fluid.transforms.round</code> transform, which in turn outputs it to the <code>outputPath</code>. Whenever an <code>outputPath</code> is specified, the result is output to the output document instead, and hence not returned to the parent transform function (if any). Instead what is returned to the parent function is <code>undefined</code>. Generally, this behavior should be rather intuitive.</p>
<h3 id="arrays-of-transforms">Arrays of transforms</h3>
<p>Things get slightly more complicated when we introduce arrays of transforms. Whenever you specify an array of transforms (i.e. <code>transform: [ (...) ]</code>), nothing will get returned to the outer transform. The consequence of this is that if you have arrays of transforms, you are required to explicitly output values via <code>outputPath</code> if you want anything output. Some examples to clarify this rule:</p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">display</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">magnification</span>": <span class="hljs-value"><span class="hljs-number">1.5412</span>
    </span>}
</span>}
</code></pre></td><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">Magnification</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">transform</span>": <span class="hljs-value">[
            {
                "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.literalValue"</span></span>,
                "<span class="hljs-attribute">input</span>": <span class="hljs-value"><span class="hljs-string">"percent"</span></span>,
                "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"dataType"</span>
            </span>}, {
                "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.round"</span></span>,
                "<span class="hljs-attribute">input</span>": <span class="hljs-value">{
                    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
                        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.linearScale"</span></span>,
                        "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"display.magnification"</span></span>,
                        "<span class="hljs-attribute">factor</span>": <span class="hljs-value"><span class="hljs-number">100</span>
                    </span>}
                </span>}</span>,
                "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"value"</span>
            </span>}
        ]
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">Magnification</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">dataType</span>": <span class="hljs-value"><span class="hljs-string">"percent"</span>
        <span class="hljs-string">"value"</span>: <span class="hljs-number">154</span>
    </span>}
</span>}
</code></pre></td>
</tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">display</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">magnification</span>": <span class="hljs-value"><span class="hljs-number">1.5412</span>
    </span>}
</span>}
</code></pre></td><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">Magnification</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">transform</span>": <span class="hljs-value">[
            {
                "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.literalValue"</span></span>,
                "<span class="hljs-attribute">input</span>": <span class="hljs-value"><span class="hljs-string">"percent"</span>
            </span>}, {
                "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.round"</span></span>,
                "<span class="hljs-attribute">input</span>": <span class="hljs-value">{
                    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
                        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.linearScale"</span></span>,
                        "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"display.magnification"</span></span>,
                        "<span class="hljs-attribute">factor</span>": <span class="hljs-value"><span class="hljs-number">100</span>
                    </span>}
                </span>}
            </span>}
        ]
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs css">
<span class="hljs-rules">{<span class="hljs-rule">}</span></span>
</code></pre></td>
</tr>
</tbody>
</table>

<p>This first example works because we have specified the <code>outputPath</code> for both transforms. If we omit these, as in the second example, nothing is output to the document. Note that the <code>fluid.transforms.linearScale</code> function does not have an <code>outputPath</code>. Instead its output is used as a return value passed to <code>fluid.transforms.round</code> - this is because the <code>linearScale</code> is not part of an array of transforms, but rather a regular entry in a transform.</p>
<h3 id="outputting-arrays">Outputting Arrays</h3>
<p>Outputting an array in the document is very straightforward. One simply specifies it, as one would normally in javascript/json - using []. The array will be populated with the results of the content as one would expect as well. If one of the array entries has a result of undefined (e.g. due to an inputPath referencing something non-existent in input model -- see below), this would also populate a spot in the array - to ensure that indexes of results are consistent.</p>
<p>As an example, take the following transformation:</p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">petlist</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">cat</span>": <span class="hljs-value"><span class="hljs-string">"Kaspar the Titanic Cat"</span></span>,
        "<span class="hljs-attribute">frog</span>": <span class="hljs-value"><span class="hljs-string">"Portuguese Steve"</span>
    </span>}
</span>}
</code></pre></td><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my_pets</span>": <span class="hljs-value">[
        {
            "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
                "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.value"</span></span>,
                "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"petlist.cat"</span>
            </span>}
        </span>}, {
            "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
                "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.value"</span></span>,
                "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"petlist.goldfish"</span>
            </span>}
        </span>}, {
            "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
                "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.value"</span></span>,
                "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"petlist.frog"</span>
            </span>}
        </span>}
    ]
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my_pets</span>": <span class="hljs-value">[
        <span class="hljs-string">"Kaspar the Titanic Cat"</span>,
        undefined,
        <span class="hljs-string">"Portuguese Steve"</span>
    ]
</span>}
</code></pre></td>
</tr>
</tbody>
</table>

<p>Notice the <code>undefined</code> value. This is the result of the second transform (since no value was found at the <code>petlist.goldfish</code> input path, <code>undefined</code> is returned.</p>
<p>The difference between this and the use of arrays in the previous sections is that in the previous section the array was used as <em>the value for a <code>transform</code> key</em>. When this is not the case, an array will be interpreted as a regular array as shown in the above example.</p>
<h2 id="static-inputs-and-nested-transforms-vs-reading-from-input-model">Static inputs and nested transforms vs. reading from input model</h2>
<p>For any <code>standardInputTransformFunction</code>, <code>standardTransformFunction</code>, <code>multiInputTransformFunction</code> and most other transformations, there are three ways of providing inputs to be used by the transformation.</p>
<ul>
<li><strong>Using values from the input model:</strong> This is done by referencing the path where the value to be used can be found. When doing this, the result of the transformation will vary depending on the input document provided to the transformation.</li>
<li><strong>Passing a static value, given directly in the rules document:</strong> In other words, one or more of the input values for the transformation is hardcoded into the transformation rule you set up. This means that the result of the transformation in question will be the same every time.</li>
<li><strong>Nested Transformation:</strong> One can use the output of a transformation as an input value to its parent transformation</li>
</ul>
<p>The three types will be explained in detail in the below:</p>
<h3 id="using-values-from-the-source-model-">Using values from the source model:</h3>
<p>Obviously, to make model transformations useful, one needs to be able to get a different output document depending on the source model supplied to the transformations. One can read from the source model by use of the <code>inputPath</code> key in any <code>standardTransformFunction</code> or <code>standardInputTransformFunction</code>. In general, any transformation that is not of these types allow to reference the source model, usually denoted by having <code>Path</code> as part of the key name - we defer to the documentation on the individual transformations below for more details on these kinds of transforms. In this section, we will only show examples of using <code>inputPath</code>.</p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">petlist</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">cat</span>": <span class="hljs-value"><span class="hljs-string">"Kaspar the Titanic Cat"</span>
    </span>}
</span>}
</code></pre></td><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my_pet</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.value"</span></span>,
            "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"petlist.cat"</span>
        </span>}
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my_pet</span>": <span class="hljs-value"><span class="hljs-string">"Kaspar the Titanic Cat"</span>
</span>}
</code></pre></td>
</tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">petlist</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">cat</span>": <span class="hljs-value"><span class="hljs-string">"CATTOO"</span>
    </span>}
</span>}
</code></pre></td><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my_pet</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.value"</span></span>,
            "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"petlist.cat"</span>
        </span>}
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my_pet</span>": <span class="hljs-value"><span class="hljs-string">"CATTOO"</span>
</span>}
</code></pre></td>
</tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">petlist</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">dog</span>": <span class="hljs-value"><span class="hljs-string">"Spot"</span>
    </span>}
</span>}
</code></pre></td><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my_pet</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.value"</span></span>,
            "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"petlist.cat"</span>
        </span>}
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs css">
<span class="hljs-rules">{<span class="hljs-rule">}</span></span>
</code></pre></td>
</tr>
</tbody>
</table>

<p>In the first two examples, you can see how, using the same transformation rules document, the output will vary based on the source model. The <code>inputPath</code> describes the el-path from where to fetch the input to the function. If no value is found in the given path, undefined will be the input to the transformation, and undefined returned. So if we have an input model without the path <code>petlist.cat</code>, like in the third example, the result of the <code>literalValue</code> transformation would be undefined, and one would receive an empty output document.</p>
<h3 id="static-values">Static Values</h3>
<p>Any <code>standardTransformFunction</code> or <code>standardInputTransformFunction</code> supports an <code>input</code> key, which can be used for passing either static values or nest transforms (<a href="ModelTransformationAPI.html#nested-transforms">see next section</a>). Most other transforms support the same types of input - we defer to their individual documentation for more details.</p>
<p>As mentioned, static values are written directly into the transformation rule document, resulting in the same input to the transform each time the model transformation is run. Defining static values to transformations is very straight forward:</p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">dog</span>": <span class="hljs-value"><span class="hljs-string">"Snoopy"</span>
</span>}
</code></pre></td><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my_pet</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.literalValue"</span></span>,
            "<span class="hljs-attribute">input</span>": <span class="hljs-value"><span class="hljs-string">"Kaspar the Titanic Cat"</span>
        </span>}
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my_pet</span>": <span class="hljs-value"><span class="hljs-string">"Kaspar the Titanic Cat"</span>
</span>}
</code></pre></td>
</tr>
<tr><td><pre class="highlight"><code class="hljs css">
<span class="hljs-rules">{<span class="hljs-rule">}</span></span>
</code></pre></td><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my_pet</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.literalValue"</span></span>,
            "<span class="hljs-attribute">input</span>": <span class="hljs-value"><span class="hljs-string">"Kaspar the Titanic Cat"</span>
        </span>}
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my_pet</span>": <span class="hljs-value"><span class="hljs-string">"Kaspar the Titanic Cat"</span>
</span>}
</code></pre></td>
</tr>
</tbody>
</table>

<p>As can be seen, regardless of the input model supplied to the transformation. Every time the transformation is run, the result will be the same.</p>
<h3 id="nested-transforms">Nested Transforms</h3>
<p>Besides static values, the <code>input</code>  key for <code>standardTransformFunction</code>s and <code>standardInputTransformFunction</code>s supports nested transforms (the same is the case for most other transforms, see their individual documentation). Nested transforms are transformations whose output value will be used as <code>input</code> value for its parent transformation.</p>
<p>An <code>input</code> interprets the content as a nested transform if its value is an object containing the <code>transform</code> or <code>literalValue</code> keywords, else the value is interpreted as a static value as described above.</p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">display</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">magnification</span>": <span class="hljs-value"><span class="hljs-number">1.5412</span>
    </span>}
</span>}
</code></pre></td><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">Magnification</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.round"</span></span>,
            "<span class="hljs-attribute">input</span>": <span class="hljs-value">{
                "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
                    "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.linearScale"</span></span>,
                    "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"display.magnification"</span></span>,
                    "<span class="hljs-attribute">factor</span>": <span class="hljs-value"><span class="hljs-number">100</span>
                </span>}
            </span>}</span>,
            "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"percent"</span>
        </span>}
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">Magnification</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">percent</span>": <span class="hljs-value"><span class="hljs-number">154</span>
    </span>}
</span>}
</code></pre></td>
</tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">display</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">magnification</span>": <span class="hljs-value"><span class="hljs-number">1.5412</span>
    </span>}
</span>}
</code></pre></td><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">Magnification</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.round"</span></span>,
            "<span class="hljs-attribute">input</span>": <span class="hljs-value">{
                "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
                    "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.linearScale"</span></span>,
                    "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"display.magnification"</span></span>,
                    "<span class="hljs-attribute">factor</span>": <span class="hljs-value"><span class="hljs-number">100</span></span>,
                    "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"sneakyPath"</span>
                </span>}
            </span>}</span>,
            "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"percent"</span>
        </span>}
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">Magnification</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">sneakyPath</span>": <span class="hljs-value"><span class="hljs-number">154.12</span>
    </span>}
</span>}
</code></pre></td>
</tr>
</tbody>
</table>

<p>The first example above, shows the correct usage of nested transforms when one wants to use the return value. The output here from the inner transform (i.e. <code>fluid.transforms.linearScale</code>) which is 154.12 is used as <code>input</code> for the outer <code>fluid.transforms.round</code> function.</p>
<p>The second example shows a case where <code>outputPath</code> has been specified in the inner transform. As described in a previous section, the consequence of this is that the transform result is output to the given path and <code>undefined</code> is returned. In the example, this means that the output of  <code>fluid.transforms.linearScale</code> is output to the specified path <code>sneakyPath</code>. The <code>fluid.transforms.round</code> will get <code>undefined</code> as <code>input</code>, which result in outputting nothing to its outputPath.</p>
<h3 id="using-static-values-as-default-fallback-value">Using static values as default fallback value</h3>
<p>Generally, <code>inputPath</code> takes precedence over <code>input</code>. This means that if both <code>input</code> and <code>inputPath</code> are provided for a transformation, the value found in the model at <code>inputPath</code> will be used.</p>
<p>This can be used to provide a &#39;default&#39; or fallback value. As mentioned, it is possible to use both types of inputs in your rule set in the different transforms, but it is also possible to specify both for a given transformation. The effect of this, is that the input from the model (via path) will be used if it is found, else the static value (or result of transform) will be used. The usefulness should be made clear by the below examples:</p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">petlist</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">cat</span>": <span class="hljs-value"><span class="hljs-string">"Kaspar the Titanic Cat"</span>
    </span>}
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my_pet</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.value"</span></span>,
            "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"petlist.cat"</span></span>,
            "<span class="hljs-attribute">input</span>": <span class="hljs-value"><span class="hljs-string">"I have no cat"</span>
        </span>}
    </span>}
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my_pet</span>": <span class="hljs-value"><span class="hljs-string">"Kaspar the Titanic Cat"</span>
</span>}
</code></pre></td>
</tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">petlist</span>": <span class="hljs-value">{ }
</span>}
</code></pre></td><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my_pet</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.value"</span></span>,
            "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"petlist.cat"</span></span>,
            "<span class="hljs-attribute">input</span>": <span class="hljs-value"><span class="hljs-string">"I have no cat"</span>
        </span>}
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs bash">
    <span class="hljs-string">"my_pet"</span>: <span class="hljs-string">"I have no cat"</span>
</code></pre></td>
</tr>
</tbody>
</table>

<p>The transformation rule stays the same, but in the second example, there is no <code>cat</code> entry in the input model. This means that the model transformation framework will default to the value found at <code>input</code> instead. Note that the value at <code>input</code> could also be an object containing transforms.</p>
<h2 id="inversion">Inversion</h2>
<p>The framework can generate the inverse of a document where it does not use nested transforms, and to the extent that individual transforms are invertible (and have their invertible function defined in the framework). One can then use the results of a transform as input to this inverse transformation and should get the original document as output.</p>
<p>The function used for inverting rules is: <code>fluid.model.transform.invertConfiguration(transformDocument)</code>, which takes a single input: the transformation rules that should be inverted. It outputs the inverted rules (inverted transformation rules).</p>
<p>In practice, perfect inversion of a rule is not always possible. Unless extra information is kept, or extra information added about defaulting values, etc., 
the inversion/lensing will be lossy (see <a href="https://issues.fluidproject.org/browse/FLUID-5133">FLUID-5133</a> ).</p>
<p>If we call our original transformation function <code>F</code>, input document <code>x</code> and output document <code>y</code>, a general transformation is described as follows: <code>F(x)=y</code>. If we say the inverse of <code>F</code> is called <code>G</code>, we use the following vocabulary to describe different levels of inversion:</p>
<ul>
<li><strong>Losslessly Invertible:</strong> <code>G(y)=G(F(x))=x</code><ul>
<li>This is in practice not always, since the generated <code>x</code> may be missing some entries, or have extra entries, depending on how well all the paths in the original <code>x</code> match the ones used by the transformation function <code>F</code>.</li>
</ul>
</li>
<li><strong>Partly Invertible:</strong> <code>F(x)=F(G(F(x)))</code><ul>
<li>In this case, there is no condition on the output of <code>G</code> alone, but it is guaranteed that one can pipe an original input model through an <code>F-&gt;G</code> sequence an unlimited number of times and always get the same model <code>y</code> as output (we say that <code>F(G)</code> is <em><a href="https://en.wikipedia.org/wiki/Idempotence">idempotent</a> on the image of <code>F</code></em>)</li>
</ul>
</li>
<li><strong>Not Invertible:</strong> <code>G</code> <strong>does not exist (or has not been defined in the framework)</strong><ul>
<li>For non-inverable functions, there is either no logical way of deciding what an inverse would mean for that function, or there is no way to reproduce the original input document from an output document.</li>
</ul>
</li>
</ul>
<p>The invertibility of each transform function will be described in conection to the individual transform function below.</p>
<h2 id="transformation-functions-">Transformation Functions:</h2>
<h3 id="output-a-value-given-as-input-fluid-transforms-value-and-fluid-transforms-identity-">Output a value given as input (fluid.transforms.value and fluid.transforms.identity)</h3>
<p><strong>Type:</strong> standardTransformFunction</p>
<p><strong>Description:</strong> This transform takes an input value and outputs it. When an <code>inputPath</code> is present, the value is taken from that path. Else the value found at <code>input</code> will be output (unless it is a <code>transform</code>, in which case it will be interpreted). It is primarily used by the framework in its shorthand notation (see examples). It is a synonym to <code>fluid.transforms.identity</code>.</p>
<p><strong>Invertibility:</strong> Partly invertible. The <code>input</code> default values are always ignored.</p>
<h4 id="examples-">Examples:</h4>
<p><strong>Example 1: Standard usage</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">path</span>": <span class="hljs-value"><span class="hljs-string">"balloon"</span>
    </span>}
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">myfavorite</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.value"</span></span>,
            "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"my.path"</span>
        </span>}
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">myfavorite</span>": <span class="hljs-value"><span class="hljs-string">"balloon"</span>
</span>}
</code></pre></td>
</tr>
</tbody>
</table>

<p><strong>Example 2: Short notation</strong></p>
<p>Note that this transform is implicit when using a string as a value to a key, where a <code>transform</code> directive would usually be expected.</p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">path</span>": <span class="hljs-value"><span class="hljs-string">"balloon"</span>
    </span>}
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">myfavorite</span>": <span class="hljs-value"><span class="hljs-string">"my.path"</span>
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">myfavorite</span>": <span class="hljs-value"><span class="hljs-string">"balloon"</span>
</span>}</code></pre></td>
</tr>
</tbody>
</table>

<h3 id="literal-value-fluid-transforms-literalvalue-">Literal Value (fluid.transforms.literalValue)</h3>
<p><strong>Type:</strong> standardOutputTransformFunction</p>
<p><strong>Description:</strong> Returns the value given as <code>input</code>, without attempting to do further transformations or interpretations for that value. It will always produce the same value independent of the source model/document.</p>
<p><strong>Invertibility:</strong> Partly invertible.</p>
<p><strong>Syntax:</strong></p>
<pre class="highlight"><code class="hljs json">{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.literalValue"</span></span>,
        "<span class="hljs-attribute">input</span>": <span class="hljs-value"><span class="hljs-string">"some constant"</span>
    </span>}
</span>}
</code></pre><h4 id="examples-">Examples:</h4>
<p><strong>Example 1: You can use literalValue if you have some constant that you want to output to the document</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs css">
<span class="hljs-rules">{<span class="hljs-rule">}</span></span>
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.literalValue"</span></span>,
        "<span class="hljs-attribute">input</span>": <span class="hljs-value"><span class="hljs-string">"some constant"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"foo"</span>
    </span>}
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">foo</span>": <span class="hljs-value"><span class="hljs-string">"some constant"</span>
</span>}
</code></pre></td>
</tr>
</tbody>
</table>


<p><strong>Example 2: The content of literal value will not be transformed further</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs css">
<span class="hljs-rules">{<span class="hljs-rule">}</span></span>
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.literalValue"</span></span>,
        "<span class="hljs-attribute">input</span>": <span class="hljs-value">{
           "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
              "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.helloworld"</span></span>,
              "<span class="hljs-attribute">input</span>": <span class="hljs-value"><span class="hljs-string">"I'm not interpreted"</span>
           </span>}
        </span>}</span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"foo"</span>
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">foo</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.helloworld"</span></span>,
            "<span class="hljs-attribute">input</span>": <span class="hljs-value"><span class="hljs-string">"I'm not interpreted"</span>
        </span>}
    </span>}
</span>}
</code></pre></td>
</tr>
</tbody>
</table>

<h3 id="fluid-transforms-stringtonumber">fluid.transforms.stringToNumber</h3>
<p><strong>Type:</strong> standardTransformFunction</p>
<p><strong>Description:</strong> Parses a string into a number. The number can be floating point or decimal. If the string is not parseable into a number, <code>undefined</code> will be returned.</p>
<p><strong>Invertibility:</strong> Partly invertible. The <code>input</code> default values are always ignored.</p>
<h4 id="examples-">Examples:</h4>
<p><strong>Example 1: Number conversion</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">path</span>": <span class="hljs-value"><span class="hljs-string">"100.91"</span>
    </span>}
</span>}</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.stringToNumber"</span></span>,
        "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"my.path"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"outie"</span>
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">outie</span>": <span class="hljs-value"><span class="hljs-number">100.91</span>
</span>}
</code></pre></td>
</tr>
</tbody>
</table>

<p><strong>Example 2: Non-number string</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">path</span>": <span class="hljs-value"><span class="hljs-string">"i am no number"</span>
    </span>}
</span>}</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.stringToNumber"</span></span>,
        "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"my.path"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"outie"</span>
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs css">
<span class="hljs-rules">{<span class="hljs-rule">}</span></span>
</code></pre></td>
</tr>
</tbody>
</table>

<h3 id="fluid-transforms-numbertostring">fluid.transforms.numberToString</h3>
<p><strong>Type:</strong> standardTransformFunction</p>
<p><strong>Description:</strong> Parses a number into a string. If the input is not a number, <code>undefined</code> will be returned.</p>
<p><strong>Invertibility:</strong> Partly invertible. It is invertible when its domain is restricted to numbers.</p>
<h4 id="examples-">Examples:</h4>
<p><strong>Example 1: Number conversion</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">path</span>": <span class="hljs-value"><span class="hljs-number">100.91</span>
    </span>}
</span>}</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.numberToString"</span></span>,
        "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"my.path"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"outie"</span>
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">outie</span>": <span class="hljs-value"><span class="hljs-string">"100.91"</span>
</span>}
</code></pre></td>
</tr>
</tbody>
</table>

<p><strong>Example 2: Non-number string</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">path</span>": <span class="hljs-value"><span class="hljs-string">"I'm a string"</span>
    </span>}
</span>}</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.stringToNumber"</span></span>,
        "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"my.path"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"outie"</span>
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs css">
<span class="hljs-rules">{<span class="hljs-rule">}</span></span>
</code></pre></td>
</tr>
</tbody>
</table>


<h3 id="count-length-of-array-fluid-transforms-count-">Count length of array (fluid.transforms.count)</h3>
<p><strong>Type:</strong> standardTransformFunction</p>
<p><strong>Description:</strong> If the input is an array, the length of the array will be the output of this function. If the input is a primitive or object, 1 will be returned.</p>
<p><strong>Invertibility:</strong> Not invertible.</p>
<h4 id="examples-">Examples:</h4>
<p><strong>Example 1: Counting the length of an array</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs css">
<span class="hljs-rules">{<span class="hljs-rule">}</span></span>
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.count"</span></span>,
        "<span class="hljs-attribute">input</span>": <span class="hljs-value">[ <span class="hljs-string">"foo"</span>, <span class="hljs-string">"bar"</span> ]</span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"howLong"</span>
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">howLong</span>": <span class="hljs-value"><span class="hljs-number">2</span>
</span>}
</code></pre></td>
</tr>
</tbody>
</table>

<p><strong>Example 2: Using path as input</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">path</span>": <span class="hljs-value">[ <span class="hljs-string">"foo"</span>, <span class="hljs-string">"bar"</span> ]
    </span>}
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.count"</span></span>,
        "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"my.path"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"howLong"</span>
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">howLong</span>": <span class="hljs-value"><span class="hljs-number">2</span>
</span>}
</code></pre></td>
</tr>
</tbody>
</table>

<p><strong>Example 3: Primitive value as input</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">path</span>": <span class="hljs-value"><span class="hljs-string">"i am a string"</span>
    </span>}
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.count"</span></span>,
        "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"my.path"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"howLong"</span>
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">howLong</span>": <span class="hljs-value"><span class="hljs-number">1</span>
</span>}
</code></pre></td>
</tr>
</tbody>
</table>

<h3 id="round-a-floating-point-number-fluid-transforms-round-">Round a floating point number (fluid.transforms.round)</h3>
<p><strong>Type:</strong> standardTransformFunction</p>
<p><strong>Description:</strong> Rounds the input to the nearest decimal.</p>
<p><strong>Invertibility:</strong> Partly invertible. The <code>input</code> default values are always ignored.</p>
<h4 id="examples-">Examples:</h4>
<p><strong>Example 1: If the input is already an array, it will stay so</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">myin</span>": <span class="hljs-value"><span class="hljs-number">123.41</span>
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.round"</span></span>,
        "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"myin"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"outie"</span>
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">outie</span>": <span class="hljs-value"><span class="hljs-number">123</span>
</span>}
</code></pre></td>
</tr>
</tbody>
</table>

<h3 id="get-first-value-of-array-fluid-transforms-firstvalue-">Get first value of array (fluid.transforms.firstValue)</h3>
<p><strong>Type:</strong> fluid.standardOuputTransformFunction</p>
<p><strong>Description:</strong> Returns the first entry of the array that does not evaluate to undefined. The input is required to be of type array.</p>
<p><strong>Invertibility:</strong> Not invertible</p>
<p><strong>syntax:</strong></p>
<pre class="highlight"><code class="hljs json">{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.firstValue"</span></span>,
        "<span class="hljs-attribute">values</span>": <span class="hljs-value">&lt;array of input values interpreted as transforms&gt;
    </span>}
</span>}
</code></pre><h4 id="examples-">Examples:</h4>
<p><strong>Example 1: Takes first entry of an array</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">foo</span>": <span class="hljs-value"><span class="hljs-string">"hello"</span></span>,
    "<span class="hljs-attribute">bar</span>": <span class="hljs-value"><span class="hljs-string">"world"</span>
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.firstValue"</span></span>,
        "<span class="hljs-attribute">values</span>": <span class="hljs-value">[ <span class="hljs-string">"foo"</span>, <span class="hljs-string">"bar"</span> ]</span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"myfirst"</span>
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs 1c">
{
    <span class="hljs-string">"myfirst"</span>: hello<span class="hljs-string">"</span>
}
</code></pre></td>
</tr>
</tbody>
</table>

<p><strong>Example 2: Ignores undefined values</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">bar</span>": <span class="hljs-value"><span class="hljs-string">"world"</span>
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.firstValue"</span></span>,
        "<span class="hljs-attribute">values</span>": <span class="hljs-value">[ <span class="hljs-string">"foo"</span>, <span class="hljs-string">"bar"</span> ]</span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"myfirst"</span>
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs 1c">
{
    <span class="hljs-string">"myfirst"</span>: world<span class="hljs-string">"</span>
}
</code></pre></td>
</tr>
</tbody>
</table>

<h3 id="delete-path-from-the-output-fluid-transforms-delete-">Delete path from the output (fluid.transforms.delete)</h3>
<p><strong>type:</strong> transformFunction</p>
<p><strong>Description:</strong> Deletes a path from the output document. This is useful when outputting a large structure to the output document, but you require deletion of a certain part of that structure.</p>
<p>The only option that <code>delete</code> supports is <code>outputPath</code>, which points to the outputPath to be deleted.</p>
<p><strong>Invertibility:</strong> Not invertible</p>
<p><strong>Syntax:</strong></p>
<pre class="highlight"><code class="hljs livecodeserver">transform: {
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"fluid.transforms.delete"</span>,
    <span class="hljs-string">"outputPath"</span>: &lt;<span class="hljs-operator">the</span> output path <span class="hljs-built_in">to</span> <span class="hljs-built_in">delete</span>&gt;
}
</code></pre><h4 id="examples-">Examples:</h4>
<p>The <code>&quot;&quot;: &quot;&quot;</code> in the transform would normally mean that the entire input model is copied without any transformations, but the delete transform ensures that the path &quot;foo&quot; is deleted.</p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">hello</span>": <span class="hljs-value"><span class="hljs-string">"world"</span></span>,
    "<span class="hljs-attribute">foo</span>": <span class="hljs-value"><span class="hljs-string">"bar"</span>
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute"></span>": <span class="hljs-value"><span class="hljs-string">""</span></span>,
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.delete"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"foo"</span>
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
     "<span class="hljs-attribute">hello</span>": <span class="hljs-value"><span class="hljs-string">"world"</span>
</span>}
</code></pre></td>
</tr>
</tbody>
</table>

<h3 id="mapping-based-on-input-value-fluid-transforms-valuemapper-">Mapping based on input value (fluid.transforms.valueMapper)</h3>
<p><strong>type:</strong> transformFunction</p>
<p><strong>Description:</strong>
This is a very powerful and flexible transformation function, which maps a defined collection of input values to corresponding output values by applying a matching algorithm. The input can be partly or fully matched, the result of the mapping can be customized on a per match basis. For further explanation, see the syntax and examples sections below.</p>
<p><strong>Invertibility:</strong> Partly invertible.</p>
<p><strong>Syntax:</strong></p>
<pre class="highlight"><code class="hljs xml">{
    type: "fluid.transforms.valueMapper",
    defaultInputPath: <span class="hljs-tag">&lt;<span class="hljs-title">default</span> <span class="hljs-attribute">input</span> <span class="hljs-attribute">path</span>&gt;</span>,
    defaultOutputPath: <span class="hljs-tag">&lt;<span class="hljs-title">default</span> <span class="hljs-attribute">output</span> <span class="hljs-attribute">path</span>&gt;</span>,
    defaultOutputValue: <span class="hljs-tag">&lt;<span class="hljs-title">default</span> <span class="hljs-attribute">output</span> <span class="hljs-attribute">value</span>&gt;</span>,
    match: [{
        partialMatches: <span class="hljs-tag">&lt;<span class="hljs-title">accept</span> <span class="hljs-attribute">partial</span> <span class="hljs-attribute">match</span>&gt;</span>,
        outputUndefinedValue: <span class="hljs-tag">&lt;<span class="hljs-title">output</span> `<span class="hljs-attribute">undefined</span>` <span class="hljs-attribute">flag</span>&gt;</span>,
        inputValue: <span class="hljs-tag">&lt;<span class="hljs-title">the</span> <span class="hljs-attribute">value</span> <span class="hljs-attribute">to</span> <span class="hljs-attribute">match</span>&gt;</span>,
        outputValue: <span class="hljs-tag">&lt;<span class="hljs-title">output</span> <span class="hljs-attribute">value</span>&gt;</span>,
        outputPath: <span class="hljs-tag">&lt;<span class="hljs-title">output</span> <span class="hljs-attribute">path</span>&gt;</span>
    }, {
        ...
    }],
    noMatch: {
        outputUndefinedValue: <span class="hljs-tag">&lt;<span class="hljs-title">output</span> `<span class="hljs-attribute">undefined</span>` <span class="hljs-attribute">flag</span>&gt;</span>,
        outputValue: <span class="hljs-tag">&lt;<span class="hljs-title">output</span> <span class="hljs-attribute">value</span>&gt;</span>,
        outputPath: <span class="hljs-tag">&lt;<span class="hljs-title">output</span> <span class="hljs-attribute">path</span>&gt;</span>
    }
};
</code></pre><p><strong><em>Top level:</em></strong></p>
<ul>
<li><code>defaultInputPath</code><ul>
<li>The input path to use.</li>
<li>Any value provided here will be overwritten by any <code>inputPath</code> given in the <code>match</code> directives.</li>
<li>This is optional if <code>inputPath</code> directives are given in each of the match directives.</li>
</ul>
</li>
<li><code>defaultOutputValue</code><ul>
<li>The value to output by default.</li>
<li>Used if no <code>outputValue</code> is provided for a given match.</li>
<li>Optional if <code>outputValue</code> is provided for all matches</li>
<li>The meaning of <code>defaultOutputValue</code> is NOT &quot;the output in case no case matches&quot; but &quot;the <code>outputValue</code> that should be used in a case where it has not been explicitly written&quot;.</li>
</ul>
</li>
<li><code>defaultOutputPath</code><ul>
<li>The output path used by default.</li>
<li>Used if no <code>outputPath</code> is provided for a given case.</li>
<li>Optional if <code>outputPath</code> is provided for all matches.</li>
</ul>
</li>
</ul>
<p><strong><em>Within <code>match</code>/<code>noMatch</code>:</em></strong></p>
<ul>
<li><code>outputPath</code><ul>
<li>Path to output to if this case matches.</li>
<li>If not provided, the <code>defaultOutputPath</code> will be used.</li>
</ul>
</li>
<li><code>outputValue</code><ul>
<li>Value to output to the <code>outputPath</code> if this case matches.</li>
<li>Value is interpreted as literal value unless it contains a <code>transforms</code> key.</li>
<li>If not provided, the <code>defaultOutputValue</code> will be used.</li>
</ul>
</li>
<li><code>inputPath</code><ul>
<li>The input path to match against.</li>
<li>Overwrites <code>defaultInputPath</code> for the given directive.</li>
</ul>
</li>
<li><code>outputUndefinedValue</code><ul>
<li>This will cause the match directive to return <code>undefined</code> as an output value, even if <code>outputValue</code> and <code>defaultOutputValue</code> are specified.</li>
</ul>
</li>
</ul>
<p><strong><em>Only within <code>match</code>:</em></strong></p>
<ul>
<li><code>inputValue</code><ul>
<li>The value to check the input against.</li>
<li>This can also be implicitly provided as a key in the top-level of options block.</li>
<li>Will always be interpreted literally (ie. no transforms allowed here)</li>
</ul>
</li>
<li><code>partialMatches</code><ul>
<li>Boolean flag, signifying whether this directive is allowed to match partly.</li>
<li>If any exact match can be made (even if it contains a partialMatches flag), this beats a partial match. Else the best partial match (ie. deepest matching) will be selected. Else the value from <code>noMatch</code> will be used.</li>
<li>If the two best partial matches are equally good, the first one listed will be returned.</li>
</ul>
</li>
</ul>
<p><strong>Priority of keys at parsing</strong>:</p>
<p>Some of the keys used in the ValueMapper conflict, in that they reference the same part of the transformation mechanisms. Below is a summary of which term takes priority when the valueMapper parses the keys:</p>
<ul>
<li><code>inputPath</code> before <code>defaultInputPath</code>  - If an <code>inputPath</code> is provided, that value will be used, else <code>defaultInputPath</code> will be used.</li>
<li><code>outputPath</code> before <code>defaultOutputValue</code>  - The <code>outputPath</code> will be used used if provded, else <code>defaultOutputPath</code> will.</li>
<li><code>outputUndefinedValue</code> over <code>outputValue</code> over <code>defaultOutputValue</code> - If <code>outputUndefinedValue</code> is provided, it will always be used. If it is not provided, but <code>outputValue</code> is, this will be used. Finally, if neither are provided, <code>defaultOutputValue</code> is used.</li>
</ul>
<p><strong>Shorthand syntax</strong>:</p>
<p>ValueMapper supports the shorthand syntax shown below. Here, the <code>&lt;inputX&gt;</code> entries are interpreted as <code>inputValue</code> by the system. If <code>&lt;outputX&gt;</code> are primitive datatypes (string, number or boolean), they will be used directly as output. Else they should be objects with the same format in the longhand syntax described above - excluding support the <code>inputValue</code> option.</p>
<pre class="highlight"><code class="hljs r">{
    type: <span class="hljs-string">"fluid.transforms.valueMapper"</span>,
    defaultInputPath: &lt;default input path&gt;,
    defaultOutputPath: &lt;default output path&gt;,
    defaultOutputValue: &lt;default output value&gt;,
    match: {
        <span class="hljs-string">"&lt;input1&gt;"</span>: &lt;output1&gt;,
        <span class="hljs-string">"&lt;input2&gt;"</span>: &lt;output2&gt;,
        <span class="hljs-keyword">...</span>,
        <span class="hljs-string">"&lt;inputN&gt;"</span>: &lt;output3&gt;
    },
    noMatch: {
        outputUndefinedValue: &lt;output `undefined` flag&gt;,
        outputValue: &lt;output value&gt;,
        outputPath: &lt;output path&gt;
    }
};
</code></pre><h4 id="examples">Examples</h4>
<p><strong>Example 1: Shorthand with primitive output values</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs css">
<span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">condition</span>:<span class="hljs-value"> <span class="hljs-string">"yes"</span>
</span></span></span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs fsharp">
{
    <span class="hljs-string">"transform"</span>: {
        <span class="hljs-class"><span class="hljs-keyword">type</span>: "<span class="hljs-title">fluid</span>.<span class="hljs-title">transforms</span>.<span class="hljs-title">valueMapper</span>",</span>
        defaultInputPath: <span class="hljs-string">"condition"</span>,
        defaultOutputPath: <span class="hljs-string">"CATTOO"</span>,
        <span class="hljs-keyword">match</span>: {
            <span class="hljs-string">"yes"</span>: <span class="hljs-string">"positiveCATT"</span>,
            <span class="hljs-string">"no"</span>: <span class="hljs-string">"negativeCATT"</span>
        }
    }
}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">CATTOO</span>": <span class="hljs-value"><span class="hljs-string">"positiveCATT"</span>
</span>}
</code></pre></td>
</tr>
</tbody>
</table>

<p><strong>Example 2: Shorthand with non-primitive output values</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs css">
<span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">condition</span>:<span class="hljs-value"> <span class="hljs-string">"no"</span>
</span></span></span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs fsharp">
{
    <span class="hljs-string">"transform"</span>: {
        <span class="hljs-class"><span class="hljs-keyword">type</span>: "<span class="hljs-title">fluid</span>.<span class="hljs-title">transforms</span>.<span class="hljs-title">valueMapper</span>",</span>
        defaultInputPath: <span class="hljs-string">"condition"</span>,
        defaultOutputPath: <span class="hljs-string">"defPath"</span>,
        <span class="hljs-keyword">match</span>: {
            <span class="hljs-string">"yes"</span>: {
                outputPath: <span class="hljs-string">"myPath1"</span>,
                outputValue: <span class="hljs-string">"positiveCATT"</span>
            },
            <span class="hljs-string">"no"</span>: {
                outputPath: <span class="hljs-string">"myPath1"</span>,
                outputValue: <span class="hljs-string">"negativeCATT"</span>
        }
    }
}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">myPath1</span>": <span class="hljs-value"><span class="hljs-string">"negativeCATT"</span>
</span>}
</code></pre></td>
</tr>
</tbody>
</table>


<p><strong>Example 3: Longhand syntax with noMatch</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs css">
<span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">whichAnimal</span>:<span class="hljs-value"> <span class="hljs-string">"CATTOO"</span>
</span></span></span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs fsharp">
{
    <span class="hljs-string">"transform"</span>: {
        <span class="hljs-class"><span class="hljs-keyword">type</span>: "<span class="hljs-title">fluid</span>.<span class="hljs-title">transforms</span>.<span class="hljs-title">valueMapper</span>",</span>
        defaultInputPath: <span class="hljs-string">"whichAnimal"</span>,
        defaultOutputValue: <span class="hljs-string">"selected"</span>,
        <span class="hljs-keyword">match</span>: [
            {
                inputValue: <span class="hljs-string">"eagle"</span>,
                outputPath: <span class="hljs-string">"eagleCATT"</span>
            }, {
                inputValue: <span class="hljs-string">"tiger"</span>,
                outputPath: <span class="hljs-string">"tigerCATT"</span>
            }
        ],
        noMatch: {
            outputPath: <span class="hljs-string">"WhosThat"</span>,
            outputValue: <span class="hljs-string">"theNoMatchCATT"</span>
        }
}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">WhosThat</span>": <span class="hljs-value"><span class="hljs-string">"theNoMatchCATT"</span>
</span>}
</code></pre></td>
</tr>
</tbody>
</table>


<p><strong>Example 4: Longhand syntax with partial Matches</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs css">
<span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">info</span>:<span class="hljs-value"> {
        <span class="hljs-string">"arms"</span>: <span class="hljs-number">2</span>,
        <span class="hljs-string">"ears"</span>: <span class="hljs-number">2</span>
    </span></span></span>}
}
</code></pre></td>
<td><pre class="highlight"><code class="hljs fsharp">
{
    <span class="hljs-string">"transform"</span>: {
        <span class="hljs-class"><span class="hljs-keyword">type</span>: "<span class="hljs-title">fluid</span>.<span class="hljs-title">transforms</span>.<span class="hljs-title">valueMapper</span>",</span>
        defaultInputPath: <span class="hljs-string">"info"</span>,
        defaultOutputPath: <span class="hljs-string">"creature"</span>,
        <span class="hljs-keyword">match</span>: [{
            inputValue: {
                <span class="hljs-string">"legs"</span>: <span class="hljs-number">2</span>,
                <span class="hljs-string">"arms"</span>: <span class="hljs-number">2</span>,
                <span class="hljs-string">"veryhairy"</span>: <span class="hljs-keyword">false</span>
            },
            partialMatches: <span class="hljs-keyword">true</span>,
            outputValue: <span class="hljs-string">"human"</span>
        }, {
            inputValue: {
                <span class="hljs-string">"legs"</span>: <span class="hljs-number">2</span>,
                <span class="hljs-string">"arms"</span>: <span class="hljs-number">2</span>
            },
            partialMatches: <span class="hljs-keyword">true</span>,
            outputValue: <span class="hljs-string">"probably monkey"</span>
        }, {
            inputValue: {
                <span class="hljs-string">"arms"</span>: <span class="hljs-number">2</span>
            },
            partialMatches: <span class="hljs-keyword">true</span>,
            outputValue: <span class="hljs-string">"can handstand"</span>
        }]
    }
}
</code></pre></td><td>
<pre class="highlight"><code class="hljs css">
<span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">creature</span>:<span class="hljs-value"> <span class="hljs-string">"can handstand"</span>
</span></span></span>}
</code></pre></td>
</tr>
</tbody>
</table>




<h3 id="binary-operation-fluid-transforms-binaryop-">Binary operation (fluid.transforms.binaryOp)</h3>
<p><strong>type:</strong> multiInputTransformFunction, standardOutputTransformFunction</p>
<p><strong>Description:</strong>
This will do a binary operation given the two operands (<code>left</code> and <code>right</code>) and the operator. You can reference to the input model for both left and right by using <code>leftPath</code> and <code>rightPath</code>. If both <code>rightPath</code> and <code>right</code> is given, a lookup will be done of <code>rightPath</code> first, and if nothing is found the constant from <code>right</code> will be used. Same goes for <code>left</code> and <code>leftPath</code>. Both the <code>left</code> and <code>right</code> operands are required (either in their path or constant form). The operator is also required. The result of the expansion will be the result of the binary operation, and this will be returned or output to the outputPath as any other <code>standardOutputTransformFunction</code>. Valid operands are:</p>
<p>Arithmetic Operators (operands are required to be numbers, output will be a number):</p>
<ul>
<li><strong>+</strong> (Addition) Adds 2 numbers.</li>
<li><strong>-</strong> (subtraction) subtracts 2 numbers</li>
<li><strong>&#42;</strong> (Multiplication) Multiplies 2 numbers.</li>
<li><strong>/</strong> (Division) Divides 2 numbers.</li>
<li><strong>%</strong> (Modulus) Computes the integer remainder of dividing 2 numbers.</li>
</ul>
<p>Comparison Operators: (operands are required to be numbers, output will be boolean)</p>
<ul>
<li><strong>===</strong> Returns true if the operands are equal.</li>
<li><strong>!==</strong> Returns true if the operands are not equal.</li>
<li><strong>&gt;</strong> Returns true if left operand is greater than right operand.</li>
<li><strong>&gt;=</strong> Returns true if left operand is greater than or equal to right operand.</li>
<li><strong>&lt;</strong> Returns true if left operand is less than right operand.</li>
<li><strong>&lt;=</strong> Returns true if left operand is less than or equal to right operand.</li>
</ul>
<p>Logical Operators: (both operands are required to be booleans, output will be boolean)</p>
<ul>
<li><strong>&amp;&amp;</strong> (Logical AND) Returns true if both logical operands are true. Otherwise, returns false.</li>
<li><strong>||</strong> (Logical OR) Returns true if either logical expression is true. If both are false, returns false.</li>
</ul>
<p><strong>Invertibility:</strong> Not invertible.</p>
<p><strong>Syntax:</strong></p>
<pre class="highlight"><code class="hljs fsharp">transform: {
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"fluid.transforms.binaryOp"</span>,
    <span class="hljs-string">"left"</span>: &lt;constant <span class="hljs-keyword">of</span> appropriate <span class="hljs-class"><span class="hljs-keyword">type</span>&gt;,</span>
    <span class="hljs-string">"right"</span>: &lt;constant <span class="hljs-keyword">of</span> appropriate <span class="hljs-class"><span class="hljs-keyword">type</span>&gt;,</span>
    <span class="hljs-string">"operator"</span>: &lt;the operator <span class="hljs-keyword">to</span> <span class="hljs-keyword">use</span>&gt;
}
</code></pre><h4 id="examples">Examples</h4>
<p><strong>Example 1: Standard addition</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">some</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">path</span>": <span class="hljs-value"><span class="hljs-number">200</span>
    </span>}
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.binaryOp"</span></span>,
        "<span class="hljs-attribute">left</span>": <span class="hljs-value"><span class="hljs-number">100</span></span>,
        "<span class="hljs-attribute">rightPath</span>": <span class="hljs-value"><span class="hljs-string">"some.path"</span></span>,
        "<span class="hljs-attribute">operator</span>": <span class="hljs-value"><span class="hljs-string">"+"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"sum"</span>
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">sum</span>": <span class="hljs-value"><span class="hljs-number">300</span>
</span>}
</code></pre></td>
</tr>
</tbody>
</table>

<p><strong>Example 2: Fallback from path</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">some</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">path</span>": <span class="hljs-value"><span class="hljs-number">200</span>
    </span>}
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.binaryOp"</span></span>,
        "<span class="hljs-attribute">left</span>": <span class="hljs-value"><span class="hljs-number">100</span></span>,
        "<span class="hljs-attribute">leftPath</span>": <span class="hljs-value"><span class="hljs-string">"some.other.path"</span></span>,
        "<span class="hljs-attribute">right</span>": <span class="hljs-value"><span class="hljs-number">0</span></span>,
        "<span class="hljs-attribute">rightPath</span>": <span class="hljs-value"><span class="hljs-string">"some.path"</span></span>,
        "<span class="hljs-attribute">operator</span>": <span class="hljs-value"><span class="hljs-string">"+"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"sum"</span>
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">sum</span>": <span class="hljs-value"><span class="hljs-number">300</span>
</span>}
</code></pre></td>
</tr>
</tbody>
</table>


<h3 id="conditional-transform-fluid-transforms-condition-">Conditional transform (fluid.transforms.condition)</h3>
<p><strong>type:</strong> multiInputTransformFunction , standardOutputTransformFunction</p>
<p><strong>Syntax:</strong></p>
<pre class="highlight"><code class="hljs cs">transform: {
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"fluid.transforms.condition"</span>,
    <span class="hljs-string">"condition"</span>: &lt;boolean <span class="hljs-keyword">value</span>&gt;
    <span class="hljs-string">"true"</span>: &lt;optional&gt;,
    <span class="hljs-string">"false"</span>: &lt;optional&gt;
}
</code></pre><p><strong>Description:</strong>
Based on the boolean <code>condition</code> constant (or the path to the inputModel <code>conditionPath</code>) either the value or <code>true</code> or <code>false</code> (<code>truePath</code>/<code>falsePath</code>, respectively) will be the result of the transform. The <code>condition</code> is required and either <code>true</code> or <code>false</code> (or both) - or their path equivalents - should be defined. As usual, the <code>*Path</code> equivalents of the input variables can be used as fallbacks.</p>
<p><strong>Invertibility:</strong> Not invertible</p>
<h4 id="example-">Example:</h4>
<p><strong>Example 1: Standard usage</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">some</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">path</span>": <span class="hljs-value"><span class="hljs-literal">true</span>
    </span>}
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.condition"</span></span>,
        "<span class="hljs-attribute">conditionPath</span>": <span class="hljs-value"><span class="hljs-string">"some.path"</span></span>,
        "<span class="hljs-attribute">true</span>": <span class="hljs-value"><span class="hljs-string">"It was true"</span></span>,
        "<span class="hljs-attribute">false</span>": <span class="hljs-value"><span class="hljs-string">"It was false"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"result"</span>
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">result</span>": <span class="hljs-value"><span class="hljs-string">"It was true"</span>
</span>}
</code></pre></td>
</tr>
</tbody>
</table>

<p><strong>Example 2: Fallback from path</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs css">
<span class="hljs-rules">{<span class="hljs-rule">}</span></span>
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.condition"</span></span>,
        "<span class="hljs-attribute">conditionPath</span>": <span class="hljs-value"><span class="hljs-string">"some.path"</span></span>,
        "<span class="hljs-attribute">condition</span>": <span class="hljs-value"><span class="hljs-literal">true</span></span>,
        "<span class="hljs-attribute">true</span>": <span class="hljs-value"><span class="hljs-string">"It was true"</span></span>,
        "<span class="hljs-attribute">false</span>": <span class="hljs-value"><span class="hljs-string">"It was false"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"result"</span>
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">result</span>": <span class="hljs-value"><span class="hljs-string">"It was true"</span>
</span>}
</code></pre></td>
</tr>
</tbody>
</table>

<p><strong>Example 3: Nested transform</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">some</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">path</span>": <span class="hljs-value"><span class="hljs-literal">true</span>
    </span>}
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.condition"</span></span>,
        "<span class="hljs-attribute">conditionPath</span>": <span class="hljs-value"><span class="hljs-string">"some.path"</span></span>,
        "<span class="hljs-attribute">true</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
                "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.binaryOp"</span></span>,
                "<span class="hljs-attribute">left</span>": <span class="hljs-value"><span class="hljs-number">100</span></span>,
                "<span class="hljs-attribute">right</span>": <span class="hljs-value"><span class="hljs-number">200</span></span>,
                "<span class="hljs-attribute">operator</span>": <span class="hljs-value"><span class="hljs-string">"+"</span>
            </span>}
        </span>}</span>,
        "<span class="hljs-attribute">false</span>": <span class="hljs-value"><span class="hljs-string">"It was false"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"result"</span>
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">result</span>": <span class="hljs-value"><span class="hljs-number">300</span>
</span>}
</code></pre></td>
</tr>
</tbody>
</table>

<p><strong>Example 4: Using an undefined input</strong></p>
<p>If either the <code>left</code> or <code>right</code> (or their path equivalents) evaluate to <code>undefined</code> and there is no default in case of using path, the result of the transform will be <code>undefined</code>.</p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">some</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">path</span>": <span class="hljs-value"><span class="hljs-literal">true</span>
    </span>}
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.condition"</span></span>,
        "<span class="hljs-attribute">conditionPath</span>": <span class="hljs-value"><span class="hljs-string">"some.path"</span></span>,
        "<span class="hljs-attribute">truePath</span>": <span class="hljs-value"><span class="hljs-string">"nonexistent.path"</span></span>,
        "<span class="hljs-attribute">false</span>": <span class="hljs-value"><span class="hljs-string">"It was false"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"result"</span>
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs css">
<span class="hljs-rules">{<span class="hljs-rule">}</span></span>
</code></pre></td>
</tr>
</tbody>
</table>


<h3 id="scale-value-with-optional-offset-fluid-transforms-linearscale-">Scale value with optional offset (fluid.transforms.linearScale)</h3>
<p><strong>type:</strong> multiInputTransformFunction, standardInputTransformFunction and standardOutputTransformFunction.</p>
<p><strong>Description:</strong> This will scale the input value using the equation: <code>value * factor + offset</code>. If <code>factor</code> is unspecified it will be interpreted as 1 and if <code>offset</code> is unspecified it will be interpreted as 0. Both <code>factor</code> and <code>offset</code> can references to the input model by using: <code>factorPath</code> and <code>offsetPath</code>, respectively. If both the path and constant for any of these values is defined, first the path is looked up, and if a value is found it will be used. Else the system will fallback to using the constant.</p>
<p><strong>Invertibility:</strong> Partly invertible.</p>
<p><strong>Syntax:</strong></p>
<pre class="highlight"><code class="hljs livecodeserver">transform: {
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"fluid.transforms.linearScale"</span>,
    <span class="hljs-string">"input"</span>: &lt;<span class="hljs-built_in">constant</span> <span class="hljs-operator">of</span> array type&gt;,
    <span class="hljs-string">"factor"</span>: &lt;<span class="hljs-operator">the</span> scaling factor&gt;,
    <span class="hljs-string">"offset"</span>: &lt;<span class="hljs-operator">the</span> <span class="hljs-built_in">offset</span> <span class="hljs-built_in">to</span> use <span class="hljs-keyword">for</span> <span class="hljs-operator">the</span> scaling&gt;
}
</code></pre><h4 id="examples-">Examples:</h4>
<p><strong>Example 1: all variables specified</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs css">
<span class="hljs-rules">{<span class="hljs-rule">}</span></span>
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.linearScale"</span></span>,
        "<span class="hljs-attribute">input</span>": <span class="hljs-value"><span class="hljs-number">12</span></span>,
        "<span class="hljs-attribute">factor</span>": <span class="hljs-value"><span class="hljs-number">10</span></span>,
        "<span class="hljs-attribute">offset</span>": <span class="hljs-value"><span class="hljs-number">100</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"mypath"</span>
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">mypath</span>": <span class="hljs-value"><span class="hljs-number">220</span>
</span>}
</code></pre>
</td>
</tr>
</tbody>
</table>



<p><strong>Example 2: Only some variables specified</strong></p>
<p>In this example, since no value is found at <code>some.path</code>, the factor will default to 1, outputting <code>12*1+0=12</code>. If a value was instead found (say, 12) the output would have been <code>12*12+0=144</code></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs css">
<span class="hljs-rules">{<span class="hljs-rule">}</span></span>
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.linearScale"</span></span>,
        "<span class="hljs-attribute">input</span>": <span class="hljs-value"><span class="hljs-number">12</span></span>,
        "<span class="hljs-attribute">factorPath</span>": <span class="hljs-value"><span class="hljs-string">"some.path"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"mypath"</span>
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">mypath</span>": <span class="hljs-value"><span class="hljs-number">12</span>
</span>}
</code></pre></td>
</tr>
</tbody>
</table>

<p><strong>Example 3: Only some variables specified</strong></p>
<p>This example uses the same transformation rule as above, but in this case a value is found at factorPath, so this will be used as factor. Since <code>offset</code> is not specified, the value 0 will be used for this.</p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">some</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">path</span>": <span class="hljs-value"><span class="hljs-number">12</span>
    </span>}
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.linearScale"</span></span>,
        "<span class="hljs-attribute">input</span>": <span class="hljs-value"><span class="hljs-number">12</span></span>,
        "<span class="hljs-attribute">factorPath</span>": <span class="hljs-value"><span class="hljs-string">"some.path"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"outie"</span>
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">outie</span>": <span class="hljs-value"><span class="hljs-number">144</span>
</span>}
</code></pre></td></tr>
</tbody>
</table>


<h3 id="mapping-a-continuous-range-into-discrete-values-fluid-transforms-quantize-">Mapping a continuous range into discrete values (fluid.transforms.quantize)</h3>
<p><strong>type:</strong> standardTransformFunction</p>
<p><strong>Description:</strong> If you have a continuous range of values (e.g. 0...*) and want to change that into discrete values, this is the transform to use. It also works as a non-linear scale of values, as you can define what ranges maps to what outputs.</p>
<p>The transform allows you to specify some ranges, defined by an <code>upperBound</code>. The first entry, the range will be the <code>upperBound</code> value to negative infinite. For the second entry, the range will be the range from the <code>upperBound</code> to (but excluding) the previous entry&#39;s <code>upperBound</code>. For the final entry no upper bound can be given, indicating that this range is from the previous <code>upperBound</code> to infinity.</p>
<p><strong>Syntax:</strong></p>
<pre class="highlight"><code class="hljs livecodeserver"><span class="hljs-string">"transform"</span>: {
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"fluid.transforms.quantize"</span>,
    <span class="hljs-string">"inputPath"</span>: &lt;path <span class="hljs-built_in">to</span> <span class="hljs-operator">the</span> <span class="hljs-built_in">value</span> <span class="hljs-built_in">to</span> check ranges <span class="hljs-built_in">from</span>&gt;,
    <span class="hljs-string">"ranges"</span>: [
        {
            <span class="hljs-string">"upperBound"</span>: &lt;<span class="hljs-operator">the</span> <span class="hljs-built_in">upper</span> bound <span class="hljs-keyword">for</span> <span class="hljs-keyword">first</span> entry, <span class="hljs-built_in">lower</span> bound is infinity&gt;,
            <span class="hljs-string">"output"</span>: &lt;output <span class="hljs-built_in">value</span> (<span class="hljs-operator">or</span> transform) <span class="hljs-operator">in</span> <span class="hljs-keyword">case</span> <span class="hljs-operator">the</span> input falls <span class="hljs-keyword">into</span> this range&gt;
        }, {
            <span class="hljs-string">"upperBound"</span>: &lt;<span class="hljs-operator">the</span> <span class="hljs-built_in">upper</span> bound <span class="hljs-keyword">for</span> <span class="hljs-keyword">second</span> entry, <span class="hljs-built_in">lower</span> bound is <span class="hljs-operator">the</span> <span class="hljs-string">'upperBound'</span> <span class="hljs-built_in">value</span> <span class="hljs-built_in">from</span> <span class="hljs-keyword">first</span> entry&gt;,
            <span class="hljs-string">"output"</span>: &lt;output <span class="hljs-built_in">value</span> (<span class="hljs-operator">or</span> transform) <span class="hljs-operator">in</span> <span class="hljs-keyword">case</span> <span class="hljs-operator">the</span> input falls <span class="hljs-keyword">into</span> this range&gt;
        }, {
            (...)
        }, {
            <span class="hljs-string">"output"</span>: &lt;output <span class="hljs-built_in">value</span> (<span class="hljs-operator">or</span> transform) <span class="hljs-keyword">if</span> input is between previous <span class="hljs-built_in">upper</span> bound <span class="hljs-operator">and</span> infinity&gt;
        }
    ]
}
</code></pre><p><strong>Invertibility:</strong> Not invertible.</p>
<h3 id="examples-">Examples:</h3>
<p><strong>Example 1: Standard usage of quantize transformer</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">input</span>": <span class="hljs-value"><span class="hljs-number">12</span>
    </span>}
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"gpii.transforms.quantize"</span></span>,
        "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"my.input"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"mysize"</span></span>,
        "<span class="hljs-attribute">ranges</span>": <span class="hljs-value">[
            {
                "<span class="hljs-attribute">upperBound</span>": <span class="hljs-value"><span class="hljs-number">11</span></span>,
                "<span class="hljs-attribute">output</span>": <span class="hljs-value"><span class="hljs-string">"small"</span>
            </span>}, {
                "<span class="hljs-attribute">upperBound</span>": <span class="hljs-value"><span class="hljs-number">13</span></span>,
                "<span class="hljs-attribute">output</span>": <span class="hljs-value"><span class="hljs-string">"normal"</span>
            </span>}, {
                "<span class="hljs-attribute">upperBound</span>": <span class="hljs-value"><span class="hljs-number">17</span></span>,
                "<span class="hljs-attribute">output</span>": <span class="hljs-value"><span class="hljs-string">"big"</span>
            </span>}, {
                "<span class="hljs-attribute">output</span>": <span class="hljs-value"><span class="hljs-string">"very big"</span>
            </span>}
        ]
    </span>}
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">mysize</span>": <span class="hljs-value"><span class="hljs-string">"normal"</span>
</span>}
</code></pre></td></tr>
</tbody>
</table>

<p><strong>Example 2: Standard usage of quantize transformer - hitting lower bound</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">input</span>": <span class="hljs-value"><span class="hljs-number">2</span>
    </span>}
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.quantize"</span></span>,
        "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"my.input"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"mysize"</span>
        <span class="hljs-string">"ranges"</span>: [
            {
                "<span class="hljs-attribute">upperBound</span>": <span class="hljs-value"><span class="hljs-number">11</span></span>,
                "<span class="hljs-attribute">output</span>": <span class="hljs-value"><span class="hljs-string">"small"</span>
            </span>}, {
                "<span class="hljs-attribute">upperBound</span>": <span class="hljs-value"><span class="hljs-number">13</span></span>,
                "<span class="hljs-attribute">output</span>": <span class="hljs-value"><span class="hljs-string">"normal"</span>
            </span>}, {
                "<span class="hljs-attribute">upperBound</span>": <span class="hljs-value"><span class="hljs-number">17</span></span>,
                "<span class="hljs-attribute">output</span>": <span class="hljs-value"><span class="hljs-string">"big"</span>
            </span>}, {
                "<span class="hljs-attribute">output</span>": <span class="hljs-value"><span class="hljs-string">"very big"</span>
            </span>}
        ]
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">mysize</span>": <span class="hljs-value"><span class="hljs-string">"small"</span>
</span>}
</code></pre></td></tr>
</tbody>
</table>

<p><strong>Example 3: Standard usage of quantize transformer - hitting upper bound</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">input</span>": <span class="hljs-value"><span class="hljs-number">200</span>
    </span>}
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.quantize"</span></span>,
        "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"my.input"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"mysize"</span>
        <span class="hljs-string">"ranges"</span>: [
            {
                "<span class="hljs-attribute">upperBound</span>": <span class="hljs-value"><span class="hljs-number">11</span></span>,
                "<span class="hljs-attribute">output</span>": <span class="hljs-value"><span class="hljs-string">"small"</span>
            </span>}, {
                "<span class="hljs-attribute">upperBound</span>": <span class="hljs-value"><span class="hljs-number">13</span></span>,
                "<span class="hljs-attribute">output</span>": <span class="hljs-value"><span class="hljs-string">"normal"</span>
            </span>}, {
                "<span class="hljs-attribute">upperBound</span>": <span class="hljs-value"><span class="hljs-number">17</span></span>,
                "<span class="hljs-attribute">output</span>": <span class="hljs-value"><span class="hljs-string">"big"</span>
            </span>}, {
                "<span class="hljs-attribute">output</span>": <span class="hljs-value"><span class="hljs-string">"very big"</span>
            </span>}
        ]
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">mysize</span>": <span class="hljs-value"><span class="hljs-string">"very big"</span>
</span>}
</code></pre></td></tr>
</tbody>
</table>


<h3 id="check-whether-a-number-is-in-a-given-range-fluid-transforms-inrange-">Check whether a number is in a given range (fluid.transforms.inRange)</h3>
<p><strong>type:</strong> standardTransformFunction</p>
<p><strong>Description:</strong> Checks whether an <code>input</code> or <code>inputPath</code> is in a given range, outputs <code>true</code> or <code>false</code> depending on whether it is in that range. The range is indicated by <code>min</code> and <code>max</code>, both of which are inclusive. The range can be open-ended by not specifying one of these.</p>
<p><strong>Syntax:</strong></p>
<pre class="highlight"><code class="hljs livecodeserver"><span class="hljs-string">"transform"</span>: {
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"fluid.transforms.inRange"</span>,
    <span class="hljs-string">"inputPath"</span>: &lt;path <span class="hljs-built_in">to</span> <span class="hljs-operator">the</span> <span class="hljs-built_in">value</span> <span class="hljs-built_in">to</span> check ranges <span class="hljs-built_in">from</span> - input is valid <span class="hljs-keyword">as</span> well&gt;,
    <span class="hljs-string">"min"</span>: &lt;OPTIONAL: <span class="hljs-operator">the</span> minimum (inclusive) <span class="hljs-operator">of</span> <span class="hljs-operator">the</span> range <span class="hljs-built_in">to</span> check&gt;,
    <span class="hljs-string">"max"</span>: &lt;OPTIONAL: <span class="hljs-operator">the</span> maximum (inclusive) <span class="hljs-operator">of</span> <span class="hljs-operator">the</span> range <span class="hljs-built_in">to</span> check&gt;,
    <span class="hljs-string">"outputPath"</span>: &lt;OPTIONAL: path <span class="hljs-built_in">to</span> output <span class="hljs-built_in">to</span>&gt;
}
</code></pre><p><strong>Invertibility:</strong> Not invertible.</p>
<h3 id="examples-">Examples:</h3>
<p><strong>Example 1: Standard usage of inRange transformer</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">input</span>": <span class="hljs-value"><span class="hljs-number">12</span>
    </span>}
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"gpii.transforms.inRange"</span></span>,
        "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"my.input"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"isInRange"</span></span>,
        "<span class="hljs-attribute">min</span>": <span class="hljs-value"><span class="hljs-number">10</span></span>,
        "<span class="hljs-attribute">max</span>": <span class="hljs-value"><span class="hljs-number">100</span>
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">isInRange</span>": <span class="hljs-value"><span class="hljs-literal">true</span>
</span>}
</code></pre></td></tr>
</tbody>
</table>

<p><strong>Example 2: Standard usage of inRange transformer (out of range)</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">input</span>": <span class="hljs-value"><span class="hljs-number">110</span>
    </span>}
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"gpii.transforms.inRange"</span></span>,
        "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"my.input"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"isInRange"</span></span>,
        "<span class="hljs-attribute">min</span>": <span class="hljs-value"><span class="hljs-number">10</span></span>,
        "<span class="hljs-attribute">max</span>": <span class="hljs-value"><span class="hljs-number">100</span>
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">isInRange</span>": <span class="hljs-value"><span class="hljs-literal">false</span>
</span>}
</code></pre></td></tr>
</tbody>
</table>

<p><strong>Example 3: Open ended usage of inRange transformer</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">input</span>": <span class="hljs-value"><span class="hljs-number">110</span>
    </span>}
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"gpii.transforms.inRange"</span></span>,
        "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"my.input"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"isInRange"</span></span>,
        "<span class="hljs-attribute">min</span>": <span class="hljs-value"><span class="hljs-number">10</span>
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">isInRange</span>": <span class="hljs-value"><span class="hljs-literal">true</span>
</span>}
</code></pre></td></tr>
</tbody>
</table>

<p><strong>Example 4: Range endpoints are inclusive</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">my</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">input</span>": <span class="hljs-value"><span class="hljs-number">100</span>
    </span>}
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"gpii.transforms.inRange"</span></span>,
        "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"my.input"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"isInRange"</span></span>,
        "<span class="hljs-attribute">min</span>": <span class="hljs-value"><span class="hljs-number">10</span></span>,
        "<span class="hljs-attribute">max</span>": <span class="hljs-value"><span class="hljs-number">100</span>
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">isInRange</span>": <span class="hljs-value"><span class="hljs-literal">true</span>
</span>}
</code></pre></td>
</tr>
</tbody>
</table>


<h3 id="creates-an-object-indexed-with-keys-from-array-entries-fluid-transforms-indexarraybykey-">Creates an object indexed with keys from array entries (fluid.transforms.indexArrayByKey)</h3>
<p><strong>type:</strong> standardTransformFunction</p>
<p><strong>Description:</strong> This transform is one of the more specialized and complex transforms. It takes an array of objects as <code>input</code>, and outputs an object of objects. For each array entry, the value of a given key in that entry (from the <code>key</code> transform option) is used as key in the output object. The values in the output object are the remaining content of that arrays&#39; entries.</p>
<p>This means that the transform requires a <code>key</code> defined - and that this should be present in each of the array-entries of the <code>input</code> - and that the values found for this key will be used to key the resulting object.</p>
<p>Besides the <code>key</code> and standard <code>input</code>/<code>inputPath</code> options, the indexArrayByKey transform allows optionally for a <code>innerValue</code>, which allows one do transforms on the values of the resulting output object. Note that within this <code>innerValue</code>, all <code>inputPath</code> (and other *Path declarations) are relative to the path defined by the <code>inputPath</code> of the indexArrayByKey transform.</p>
<p>Note: this transform was developed in relation to the XMLSettingsHandler used by the GPII auto-personalization. This translates data from XML files (which often represents &quot;morally indexed&quot; data in repeating array-like constructs where the indexing key is held, for example, in an attribute) to JSON format. This transform makes it easier (possible) to reference the specific elements within one of these XML arrays that are otherwise only uniquely identifiable via their content (and not their order).</p>
<p><strong>Invertibility:</strong> Partly invertible (into <a href="ModelTransformationAPI.html#creates-an-object-indexed-with-keys-from-array-entries-fluid-transforms-deindexintoarraybykey-"><code>fluid.transforms.deindexIntoArrayByKey</code></a>).</p>
<p><strong>Syntax:</strong></p>
<pre class="highlight"><code class="hljs avrasm"><span class="hljs-label">transform:</span> {
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"fluid.transforms.indexArrayByKey"</span>,
    <span class="hljs-string">"inputPath"</span>: <span class="hljs-string">"some input path pointing to an array"</span>,
    <span class="hljs-string">"key"</span>: <span class="hljs-string">"the variable from array to use as key"</span>
    <span class="hljs-string">"innerValue"</span>: [ (..<span class="hljs-preprocessor">.inner</span> transforms...) ]
}
</code></pre><h4 id="examples-">Examples:</h4>
<p><strong>Example 1: Simple Example</strong></p>
<p>In this example, the <code>key</code> provided in our transform function is <code>product</code>. This means that for each entry in our input array, we will use the value found by the <code>product</code> key (i.e. &quot;salad&quot; and &quot;candy&quot;, respectively) and use that as the key in our output object. The output object will contain, for each key, the remaining entries from the array entry&#39;s object.</p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">foo</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">bar</span>": <span class="hljs-value">[
            { "<span class="hljs-attribute">product</span>": <span class="hljs-value"><span class="hljs-string">"salad"</span></span>, "<span class="hljs-attribute">price</span>": <span class="hljs-value"><span class="hljs-number">10</span></span>, "<span class="hljs-attribute">healthy</span>": <span class="hljs-value"><span class="hljs-string">"yes"</span> </span>},
            { "<span class="hljs-attribute">product</span>": <span class="hljs-value"><span class="hljs-string">"candy"</span></span>, "<span class="hljs-attribute">price</span>": <span class="hljs-value"><span class="hljs-number">18</span></span>, "<span class="hljs-attribute">healthy</span>": <span class="hljs-value"><span class="hljs-string">"no"</span> </span>}
        ]
    </span>}
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.indexArrayByKey"</span></span>,
        "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"foo.bar"</span></span>,
        "<span class="hljs-attribute">key</span>": <span class="hljs-value"><span class="hljs-string">"product"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"transformed"</span>
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs bash">
{
    <span class="hljs-string">"transformed"</span>: {
        <span class="hljs-string">"salad"</span>: { price: <span class="hljs-number">10</span>, healthy: <span class="hljs-string">"yes"</span> },
        <span class="hljs-string">"candy"</span>: { price: <span class="hljs-number">18</span>, healthy: <span class="hljs-string">"no"</span> }
    }
}
</code></pre></td></tr>
</tbody>
</table>

<p><strong>Example 2: Using InnerValue for transforms</strong></p>
<p>An optional variable to the transform is <code>innerValue</code>. Any variable or transform that needs to refer to the content of the array should be declared here. The input paths within the innerValue block will be relative to the original array entry.</p>
<p>For the below example, in the second (innermost) <code>inputPath</code>, we refer to <code>info.healthy</code>, which is relative to the path defined by our outer <code>inputPath</code>. As can be seen the transform defined within <code>innerValue</code> is applied to the value of the output object.</p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">foo</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">bar</span>": <span class="hljs-value">[
            { "<span class="hljs-attribute">product</span>": <span class="hljs-value"><span class="hljs-string">"salad"</span></span>, "<span class="hljs-attribute">info</span>": <span class="hljs-value">{ "<span class="hljs-attribute">price</span>": <span class="hljs-value"><span class="hljs-number">10</span></span>, "<span class="hljs-attribute">healthy</span>": <span class="hljs-value"><span class="hljs-string">"yes"</span> </span>}</span>},
            { "<span class="hljs-attribute">product</span>": <span class="hljs-value"><span class="hljs-string">"candy"</span></span>, "<span class="hljs-attribute">info</span>": <span class="hljs-value">{ "<span class="hljs-attribute">price</span>": <span class="hljs-value"><span class="hljs-number">18</span></span>, "<span class="hljs-attribute">healthy</span>": <span class="hljs-value"><span class="hljs-string">"no"</span></span>, "<span class="hljs-attribute">tasty</span>": <span class="hljs-value"><span class="hljs-string">"yes"</span> </span>}</span>}
        ]
    </span>}
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.indexArrayByKey"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"transformed"</span></span>,
        "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"foo.bar"</span></span>,
        "<span class="hljs-attribute">key</span>": <span class="hljs-value"><span class="hljs-string">"product"</span></span>,
        "<span class="hljs-attribute">innerValue</span>": <span class="hljs-value">[{
            "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
                "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.value"</span></span>,
                "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"info.healthy"</span>
            </span>}
        </span>}]
    </span>}
</span>}

</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transformed</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">salad</span>": <span class="hljs-value"><span class="hljs-string">"yes"</span></span>,
        "<span class="hljs-attribute">candy</span>": <span class="hljs-value"><span class="hljs-string">"no"</span>
    </span>}
</span>}
</code></pre></td></tr>
</tbody>
</table>

<h3 id="create-an-object-indexed-with-keys-from-array-entries-fluid-transforms-deindexintoarraybykey-">Create an object indexed with keys from array entries (fluid.transforms.deindexIntoArrayByKey).</h3>
<p><strong>type:</strong> standardTransformFunction</p>
<p><strong>Description:</strong> Transforms an object of objects into an array of objects, by deindexing the object keys. The objects within the output object, will each contain a de-indexed key as an extra item, with the key for that new item being defined by the <code>key</code> parameter.</p>
<p>A brief illustration of this is given here:</p>
<pre class="highlight"><code class="hljs applescript">input: {
    <span class="hljs-string">"cat"</span>: { <span class="hljs-property">name</span>: <span class="hljs-string">"CATTOO"</span> },
    <span class="hljs-string">"mouse"</span>: { <span class="hljs-property">name</span>: <span class="hljs-string">"MAUS"</span> }
}
output: [
    { <span class="hljs-property">name</span>: <span class="hljs-string">"CATTOO"</span>, animal: <span class="hljs-string">"cat"</span> },
    { <span class="hljs-property">name</span>: <span class="hljs-string">"MAUS"</span>, animal: <span class="hljs-string">"mouse"</span> }
]
</code></pre><p>In the above case, the <code>key</code> option would be <code>animal</code>. The outer key-names are added to their respective object as an entry with a key <code>animal</code>.</p>
<p>Besides the <code>key</code> and standard <code>input</code>/<code>inputPath</code> options, the <code>deindexIntoArrayByKey</code> transform allows optionally for a <code>innerValue</code>, which allows one do transforms on the values of the resulting output object. Note that within this <code>innerValue</code>, all <code>inputPath</code> (and other <code>*Path</code> declarations) are relative to the path defined by the <code>inputPath</code> of the <code>deindexIntoArrayByKey</code> transform.</p>
<p>Note: this transform was developed in relation to the XMLSettingsHandler used by the GPII auto-personalization. This translates data from XML files (which often represents &quot;morally indexed&quot; data in repeating array-like constructs where the indexing key is held, for example, in an attribute) to JSON format. This transform makes it easier (possible) to reference the specific elements within one of these XML arrays that are otherwise only uniquely identifiable via their content (and not their order).</p>
<p><strong>Invertibility:</strong> Partly invertible. (into is <a href="ModelTransformationAPI.html#creates-an-object-indexed-with-keys-from-array-entries-fluid-transforms-indexarraybykey-"><code>fluid.transforms.indexArrayByKey</code></a>)</p>
<p><strong>Syntax:</strong></p>
<pre class="highlight"><code class="hljs avrasm"><span class="hljs-label">transform:</span> {
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"fluid.transforms.deindexIntoArrayByKey"</span>,
    <span class="hljs-string">"inputPath"</span>: <span class="hljs-string">"some input path pointing to an object of objects"</span>,
    <span class="hljs-string">"key"</span>: <span class="hljs-string">"the variable to use as key for newly added entries"</span>
    <span class="hljs-string">"innerValue"</span>: [ (..<span class="hljs-preprocessor">.inner</span> transforms...) ]
}
</code></pre><h4 id="examples-">Examples:</h4>
<p><strong>Example 1: Simple Example</strong></p>
<p>In this example, the <code>key</code> provided in our transform function is <code>product</code>. This means that each of the keys within the object given as input, will be added as a value to the corresponding object with <code>product</code> as key.</p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">foo</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">salad</span>": <span class="hljs-value">{ "<span class="hljs-attribute">price</span>": <span class="hljs-value"><span class="hljs-number">10</span></span>, "<span class="hljs-attribute">healthy</span>": <span class="hljs-value"><span class="hljs-string">"yes"</span> </span>}</span>,
        "<span class="hljs-attribute">candy</span>": <span class="hljs-value">{ "<span class="hljs-attribute">price</span>": <span class="hljs-value"><span class="hljs-number">18</span></span>, "<span class="hljs-attribute">healthy</span>": <span class="hljs-value"><span class="hljs-string">"no"</span> </span>}
    </span>}
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.deindexIntoArrayByKey"</span></span>,
        "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"foo"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"bar"</span></span>,
        "<span class="hljs-attribute">key</span>": <span class="hljs-value"><span class="hljs-string">"product"</span>
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs avrasm">
<span class="hljs-label">bar:</span> [
    { product: <span class="hljs-string">"salad"</span>, price: <span class="hljs-number">10</span>, healthy: <span class="hljs-string">"yes"</span> },
    { product: <span class="hljs-string">"candy"</span>, price: <span class="hljs-number">18</span>, healthy: <span class="hljs-string">"no"</span> }
]
</code></pre></td>
</tr>
</tbody>
</table>

<p><strong>Example 2: Using InnerValue for transforms</strong></p>
<p>An optional variable to the transform is <code>innerValue</code>. Any variable or transform that needs to refer to the content of the array should be declared here. The input paths within the innerValue block will be relative to the original array entry.</p>
<p>For the below example, in the second (innermost) <code>inputPath</code>, we refer to <code>info.healthy</code>, which is relative to the path defined by our outer <code>inputPath</code>. As can be seen the transform defined within <code>innerValue</code> is applied to the value of the output object.</p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">foo</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">salad</span>": <span class="hljs-value">{ "<span class="hljs-attribute">price</span>": <span class="hljs-value"><span class="hljs-number">10</span></span>, "<span class="hljs-attribute">healthy</span>": <span class="hljs-value"><span class="hljs-string">"yes"</span> </span>}</span>,
        "<span class="hljs-attribute">candy</span>": <span class="hljs-value">{ "<span class="hljs-attribute">price</span>": <span class="hljs-value"><span class="hljs-number">18</span></span>, "<span class="hljs-attribute">healthy</span>": <span class="hljs-value"><span class="hljs-string">"no"</span> </span>}
    </span>}
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.deindexIntoArrayByKey"</span></span>,
        "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"foo"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"bar"</span></span>,
        "<span class="hljs-attribute">key</span>": <span class="hljs-value"><span class="hljs-string">"product"</span></span>,
        "<span class="hljs-attribute">innerValue</span>": <span class="hljs-value">[{
            "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
                "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.value"</span></span>,
                "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">""</span></span>,
                "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"info.healthy"</span>
            </span>}

        </span>}]
    </span>}
</span>}

</code></pre></td><td>
<pre class="highlight"><code class="hljs bash">
{
    <span class="hljs-string">"bar"</span>: [
        { product: <span class="hljs-string">"salad"</span>, info: { price: <span class="hljs-number">10</span>, healthy: <span class="hljs-string">"yes"</span> }},
        { product: <span class="hljs-string">"candy"</span>, info: { price: <span class="hljs-number">18</span>, healthy: <span class="hljs-string">"no"</span> }}
    ]
}
</code></pre></td></tr>
</tbody>
</table>

<h3 id="get-the-index-of-an-element-in-an-array-fluid-transforms-indexof-">Get the index of an element in an array (fluid.transforms.indexOf)</h3>
<p><strong>Type:</strong> standardTransformFunction</p>
<p><strong>Description:</strong> Returns the index of a given element in an array. This transform checks whether the given <code>input</code>/<code>inputPath</code> is in the array provided via <code>array</code>. If it is found, the index of the element is given. If it is not found, <code>-1</code> will be returned instead.</p>
<p>It furthermore allows for an <code>offset</code> to be provided, which will be added to the return value, and a <code>notFound</code> which will be returned in case the element is not found in the array. <code>notFound</code> is not allowed to be a positive integer, as this threatens invertibility.</p>
<p>The <code>offset</code> will be added to the output index, even if the element is not found.</p>
<p>Returns <code>undefined</code> if no array is provided.</p>
<p><strong>Invertibility:</strong> Fully invertible (into <a href="ModelTransformationAPI.html#get-the-value-at-an-index-of-array-fluid-transforms-dereference-"><code>fluid.transforms.dereference</code></a>) with the domain of values that are present in the array.</p>
<p><strong>Syntax:</strong></p>
<pre class="highlight"><code class="hljs livecodeserver">{
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"fluid.transforms.indexOf"</span>,
    <span class="hljs-string">"array"</span>: &lt;<span class="hljs-operator">the</span> array <span class="hljs-built_in">to</span> look <span class="hljs-operator">in</span>&gt;,
    <span class="hljs-string">"input"</span>: &lt;<span class="hljs-operator">the</span> <span class="hljs-built_in">value</span> <span class="hljs-built_in">to</span> look <span class="hljs-keyword">for</span>&gt;,
    <span class="hljs-string">"notFound"</span>: &lt;OPTIONAL: <span class="hljs-built_in">to</span> be returned <span class="hljs-operator">in</span> <span class="hljs-keyword">case</span> <span class="hljs-operator">the</span> <span class="hljs-keyword">element</span> is <span class="hljs-operator">not</span> found&gt;,
    <span class="hljs-string">"offset"</span>: &lt;OPTIONAL: <span class="hljs-built_in">offset</span> <span class="hljs-built_in">to</span> <span class="hljs-operator">the</span> returned index&gt;
}
</code></pre><h4 id="examples-">Examples:</h4>
<p><strong> Example 1: standard usage</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">element</span>": <span class="hljs-value"><span class="hljs-string">"dog"</span>
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">value</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.indexOf"</span></span>,
            "<span class="hljs-attribute">array</span>": <span class="hljs-value">[<span class="hljs-string">"sheep"</span>, <span class="hljs-string">"dog"</span>]</span>,
            "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"element"</span>
        </span>}
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-number">1</span>
</span>}
</code></pre></td></tr>
</tbody>
</table>

<p><strong> Example 2: -1 is returned if element is not found</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">element</span>": <span class="hljs-value"><span class="hljs-string">"goat"</span>
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">value</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.indexOf"</span></span>,
            "<span class="hljs-attribute">array</span>": <span class="hljs-value">[<span class="hljs-string">"sheep"</span>, <span class="hljs-string">"dog"</span>]</span>,
            "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"element"</span>
        </span>}
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">value</span>": <span class="hljs-value">-<span class="hljs-number">1</span>
</span>}
</code></pre></td></tr>
</tbody>
</table>

<p><strong> Example 3: Usage with notFound</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">element</span>": <span class="hljs-value"><span class="hljs-string">"goat"</span>
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">value</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.indexOf"</span></span>,
            "<span class="hljs-attribute">array</span>": <span class="hljs-value">[<span class="hljs-string">"sheep"</span>, <span class="hljs-string">"dog"</span>]</span>,
            "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"element"</span></span>,
            "<span class="hljs-attribute">notFound</span>": <span class="hljs-value"><span class="hljs-string">"not there"</span>
        </span>}
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"not there"</span>
</span>}
</code></pre></td></tr>
</tbody>
</table>

<p><strong> Example 4: Usage with offset</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">element</span>": <span class="hljs-value"><span class="hljs-string">"dog"</span>
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">value</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.indexOf"</span></span>,
            "<span class="hljs-attribute">array</span>": <span class="hljs-value">[<span class="hljs-string">"sheep"</span>, <span class="hljs-string">"dog"</span>]</span>,
            "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"element"</span></span>,
            "<span class="hljs-attribute">offset</span>": <span class="hljs-value"><span class="hljs-number">2</span>
        </span>}
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-number">3</span>
</span>}
</code></pre></td></tr>
</tbody>
</table>

<p><strong> Example 5: Offset added even if element is not found</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">element</span>": <span class="hljs-value"><span class="hljs-string">"goat"</span>
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">value</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.indexOf"</span></span>,
            "<span class="hljs-attribute">array</span>": <span class="hljs-value">[<span class="hljs-string">"sheep"</span>, <span class="hljs-string">"dog"</span>]</span>,
            "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"element"</span></span>,
            "<span class="hljs-attribute">offset</span>": <span class="hljs-value"><span class="hljs-number">2</span>
        </span>}
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-number">1</span>
</span>}
</code></pre></td></tr>
</tbody>
</table>

<h3 id="get-the-value-at-an-index-of-array-fluid-transforms-dereference-">Get the value at an index of array (fluid.transforms.dereference)</h3>
<p><strong>Type:</strong> standardTransformFunction</p>
<p><strong>Description:</strong> Returns the value of a given index in an array. This transform looks up the index given by <code>input</code>/<code>inputPath</code> in the array provided via <code>array</code>. It returns the value found at that index.</p>
<p>It allows for an <code>offset</code> to be provided, which will be added to the index that is being looked up.</p>
<p><strong>Invertibility:</strong> Partly invertible (into <a href="ModelTransformationAPI.html#get-the-index-of-an-element-in-an-array-fluid-transforms-indexof-"><code>fluid.transforms.indexOf</code></a>).</p>
<p><strong>Syntax:</strong></p>
<pre class="highlight"><code class="hljs livecodeserver">{
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"fluid.transforms.dereference"</span>,
    <span class="hljs-string">"array"</span>: &lt;<span class="hljs-operator">the</span> array <span class="hljs-built_in">to</span> look <span class="hljs-operator">in</span>&gt;,
    <span class="hljs-string">"input"</span>: &lt;<span class="hljs-operator">the</span> index <span class="hljs-built_in">to</span> look <span class="hljs-keyword">for</span>&gt;,
    <span class="hljs-string">"offset"</span>: &lt;OPTIONAL: <span class="hljs-built_in">offset</span> <span class="hljs-built_in">to</span> <span class="hljs-operator">the</span> index being looked up&gt;
}
</code></pre><h4 id="examples-">Examples:</h4>
<p><strong> Example 1: standard usage</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">element</span>": <span class="hljs-value"><span class="hljs-number">1</span>
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">value</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.dereference"</span></span>,
            "<span class="hljs-attribute">array</span>": <span class="hljs-value">[<span class="hljs-string">"sheep"</span>, <span class="hljs-string">"dog"</span>]</span>,
            "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"element"</span>
        </span>}
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"dog"</span>
</span>}
</code></pre></td></tr>
</tbody>
</table>

<p><strong> Example 2: Usage with offset</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">element</span>": <span class="hljs-value"><span class="hljs-number">0</span>
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">value</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.dereference"</span></span>,
            "<span class="hljs-attribute">array</span>": <span class="hljs-value">[<span class="hljs-string">"sheep"</span>, <span class="hljs-string">"dog"</span>]</span>,
            "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"element"</span></span>,
            "<span class="hljs-attribute">offset</span>": <span class="hljs-value"><span class="hljs-number">1</span>
        </span>}
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"dog"</span>
</span>}
</code></pre></td></tr>
</tbody>
</table>


<h3 id="create-string-from-template-fluid-transforms-stringtemplate-">Create string from template (fluid.transforms.stringTemplate)</h3>
<p><strong>Type:</strong> standardOutputTransformFunction.</p>
<p><strong>Description:</strong> Simple string template system. Takes a template string (via the <code>template</code> parameter) containing tokens in the form of &quot;%value&quot;. Returns a new string with the tokens replaced by values specified in the <code>terms</code> parameter. Keys and values can be of any data type that can be coerced into a string. Arrays will work here as well.</p>
<p>Currently it does not support reading any of its values from the input model. Furthermore, both <code>template</code> and <code>terms</code> are read as literal values, and hence not further interpreted by the model transformation system.</p>
<p><strong>Invertibility:</strong> Not invertible.</p>
<p><strong>Syntax:</strong></p>
<pre class="highlight"><code class="hljs cpp">{
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"fluid.transforms.stringTemplate"</span>,
    <span class="hljs-string">"template"</span>: &lt;<span class="hljs-built_in">string</span> <span class="hljs-keyword">template</span>&gt;,
    <span class="hljs-string">"terms"</span>: &lt;<span class="hljs-built_in">map</span> or <span class="hljs-built_in">array</span> of <span class="hljs-keyword">template</span> values&gt;
}
</code></pre><h4 id="examples-">Examples:</h4>
<p><strong> Example 1: Usage with map of terms</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs css">
<span class="hljs-rules">{<span class="hljs-rule">}</span></span>
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">value</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.stringTemplate"</span></span>,
            "<span class="hljs-attribute">template</span>": <span class="hljs-value"><span class="hljs-string">"Paused at: %atFile of %totalFiles files (%atSize of %totalSize)"</span></span>,
            "<span class="hljs-attribute">terms</span>": <span class="hljs-value">{
                "<span class="hljs-attribute">atFile</span>": <span class="hljs-value"><span class="hljs-number">12</span></span>,
                "<span class="hljs-attribute">totalFiles</span>": <span class="hljs-value"><span class="hljs-number">14</span></span>,
                "<span class="hljs-attribute">atSize</span>": <span class="hljs-value"><span class="hljs-string">"100 Kb"</span></span>,
                "<span class="hljs-attribute">totalSize</span>": <span class="hljs-value"><span class="hljs-string">"12000 Gb"</span>
            </span>}</span>,
            "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"finalstring"</span>
        </span>}
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">finalstring</span>": <span class="hljs-value"><span class="hljs-string">"Paused at: 12 of 14 files (100 Kb of 12000Gb)"</span>
</span>}
</code></pre></td></tr>
</tbody>
</table>

<p><strong> Example 2: Usage with array of terms</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs css">
<span class="hljs-rules">{<span class="hljs-rule">}</span></span>
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">value</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.stringTemplate"</span></span>,
            "<span class="hljs-attribute">template</span>": <span class="hljs-value"><span class="hljs-string">"Paused at: %0 of %1 files (%2 of %3)"</span></span>,
            "<span class="hljs-attribute">terms</span>": <span class="hljs-value">[ <span class="hljs-number">12</span>, <span class="hljs-number">14</span>, <span class="hljs-string">"100 Kb"</span>, <span class="hljs-string">"12000 Gb"</span> ]</span>,
            "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"finalstring"</span>
        </span>}
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">finalstring</span>": <span class="hljs-value"><span class="hljs-string">"Paused at: 12 of 14 files (100 Kb of 12000Gb)"</span>
</span>}
</code></pre></td></tr>
</tbody>
</table>

<h3 id="use-any-globally-available-function-as-transform-fluid-transforms-free-">Use any globally available function as transform (fluid.transforms.free)</h3>
<p><strong>Type:</strong> transformFunction</p>
<p><strong>Description:</strong> Proxy transform to call any globally available function. The function to be called is passed via the <code>func</code> key, and the arguments passed are to the function are passed via the <code>args</code> key. If <code>args</code> is an array, each entry will be passed as individual arguments to the function. If <code>args</code> is an object, it will be passed to the function as a single argument which is the object - this is also true for any primitive datatype.</p>
<p>Does not support reading any of its values from the input model, and any value passed to this transform via the <code>func</code> and <code>args</code> keys are passed into the transform as literal values (i.e. further transforms will not be parsed).</p>
<p><strong>Invertibility:</strong> Not invertible.</p>
<p><strong>Syntax:</strong></p>
<pre class="highlight"><code class="hljs livecodeserver">{
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"fluid.transforms.free"</span>,
    <span class="hljs-string">"func"</span>: &lt;<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">name</span>&gt;,</span>
    <span class="hljs-string">"args"</span>: &lt;arguments <span class="hljs-built_in">to</span> <span class="hljs-operator">the</span> <span class="hljs-function"><span class="hljs-keyword">function</span>&gt;</span>
}
</code></pre><h4 id="examples-">Examples:</h4>
<p><strong> Example 1: Usage with array</strong></p>
<p>For the below example, imagine that the following function is globally available:</p>
<pre class="highlight"><code class="hljs javascript">fluid.myfuncs.addThree = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(a, b, c)</span> {</span>
    <span class="hljs-keyword">return</span> a + b + c;
};
</code></pre><table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs undefined">
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">value</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.free"</span></span>,
            "<span class="hljs-attribute">func</span>": <span class="hljs-value"><span class="hljs-string">"fluid.myfuncs.addThree"</span></span>,
            "<span class="hljs-attribute">args</span>": <span class="hljs-value">[<span class="hljs-number">9</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]
            <span class="hljs-string">"outputPath"</span>: <span class="hljs-string">"result"</span></span>,
        }
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">result</span>": <span class="hljs-value"><span class="hljs-number">14</span>
</span>}
</code></pre></td></tr>
</tbody>
</table>

<p><strong> Example 2: Usage with object as args</strong></p>
<p>In the following example, imagine you have the following two functions globally available:</p>
<pre class="highlight"><code class="hljs javascript">fluid.myfuncs.addThree = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(a, b, c)</span> {</span>
    <span class="hljs-keyword">return</span> a + b + c;
};

fluid.myfuncs.addNumbers = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(options)</span> {</span>
    <span class="hljs-keyword">return</span> fluid.myfuncs.addThree.apply(<span class="hljs-literal">null</span>, options.numbers);
};
</code></pre><table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs css">
<span class="hljs-rules">{<span class="hljs-rule">}</span></span>
</code></pre></td>
<td><pre class="highlight"><code class="hljs bash">
{
    <span class="hljs-string">"value"</span>: {
        <span class="hljs-string">"transform"</span>: {
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"fluid.transforms.free"</span>,
            <span class="hljs-string">"func"</span>: <span class="hljs-string">"fluid.myfuncs.addNumbers"</span>,
            <span class="hljs-string">"args"</span>: {numbers: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]},
            <span class="hljs-string">"outputPath"</span>: <span class="hljs-string">"result"</span>
        }
    }
}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">result</span>": <span class="hljs-value"><span class="hljs-number">6</span>
</span>}
</code></pre></td></tr>
</tbody>
</table>

<h3 id="fluid-transforms-arraytosetmembership">fluid.transforms.arrayToSetMembership</h3>
<p><strong>Type:</strong> standardTransformFunction</p>
<p><strong>Description:</strong> This transform can be used when one wants to create a set based on values available in an array. This is yet another specialized and complex transformation. Based on which values are present in the input array, an output object will be produced with predefined keys and values indicating whether a specific value was present in the array.</p>
<p>As an example, if one has an array listing of capabilities supported by a specific system and need an object listing all possible system capabilities with a true/false value indicating whether the specific system supports it.</p>
<p><strong>Invertibility:</strong> Partly invertible (into <a href="ModelTransformationAPI.html#fluid-transforms-arraytosetmembership"><code>setMembershipToArray</code></a>)</p>
<p><strong>Syntax:</strong></p>
<p>If <code>presentValue</code> and <code>missingValue</code> are not defined they will default to: <code>true</code> and <code>false</code>, respectively.</p>
<pre class="highlight"><code class="hljs r">transform: {
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"fluid.transforms.arrayToSetMembership"</span>,
    <span class="hljs-string">"inputPath"</span>: &lt;standard inputPath&gt;,
    <span class="hljs-string">"presentValue"</span>: &lt;Value <span class="hljs-keyword">for</span> an entry <span class="hljs-keyword">in</span> output set <span class="hljs-keyword">if</span> expectedArrayEntryX is present <span class="hljs-keyword">in</span> array&gt;,
    <span class="hljs-string">"missingValue"</span>: &lt;That value given to an entry <span class="hljs-keyword">if</span> expectedArrayEntryX is present <span class="hljs-keyword">in</span> array&gt;,
    <span class="hljs-string">"options"</span>: {
        <span class="hljs-string">"expectedArrayEntry1"</span>: <span class="hljs-string">"Key of output set 1"</span>,
        (<span class="hljs-keyword">...</span>)
        <span class="hljs-string">"expectedArrayEntryN"</span>: <span class="hljs-string">"Key of output set N"</span>,
    }
}
</code></pre><p><strong>Examples:</strong></p>
<p><strong>Example 1: Standard Usage</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">controls</span>": <span class="hljs-value">[ <span class="hljs-string">"mouse"</span>, <span class="hljs-string">"keyboard"</span> ]
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.arrayToSetMembership"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"detections"</span></span>,
        "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"controls"</span></span>,
        "<span class="hljs-attribute">presentValue</span>": <span class="hljs-value"><span class="hljs-string">"supported"</span></span>,
        "<span class="hljs-attribute">missingValue</span>": <span class="hljs-value"><span class="hljs-string">"not supported"</span></span>,
        "<span class="hljs-attribute">options</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">mouse</span>": <span class="hljs-value"><span class="hljs-string">"hasMouse"</span></span>,
            "<span class="hljs-attribute">keyboard</span>": <span class="hljs-value"><span class="hljs-string">"hasKeyboard"</span></span>,
            "<span class="hljs-attribute">trackpad</span>": <span class="hljs-value"><span class="hljs-string">"hasTrackpad"</span></span>,
            "<span class="hljs-attribute">headtracker</span>": <span class="hljs-value"><span class="hljs-string">"hasHeadtracker"</span>
        </span>}
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">detections</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">hasMouse</span>": <span class="hljs-value"><span class="hljs-string">"supported"</span></span>,
        "<span class="hljs-attribute">hasKeyboard</span>": <span class="hljs-value"><span class="hljs-string">"supported"</span></span>,
        "<span class="hljs-attribute">hasTrackpad</span>": <span class="hljs-value"><span class="hljs-string">"not supported"</span></span>,
        "<span class="hljs-attribute">hasHeadtracker</span>": <span class="hljs-value"><span class="hljs-string">"not supported"</span>
    </span>}
</span>}
</code></pre></td></tr>
</tbody>
</table>


<p><strong>Example 2: Not defining presentValue and missingValue</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">controls</span>": <span class="hljs-value">[ <span class="hljs-string">"mouse"</span>, <span class="hljs-string">"keyboard"</span> ]
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.arrayToSetMembership"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"detections"</span></span>,
        "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"controls"</span></span>,
        "<span class="hljs-attribute">options</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">mouse</span>": <span class="hljs-value"><span class="hljs-string">"hasMouse"</span></span>,
            "<span class="hljs-attribute">keyboard</span>": <span class="hljs-value"><span class="hljs-string">"hasKeyboard"</span></span>,
            "<span class="hljs-attribute">trackpad</span>": <span class="hljs-value"><span class="hljs-string">"hasTrackpad"</span></span>,
            "<span class="hljs-attribute">headtracker</span>": <span class="hljs-value"><span class="hljs-string">"hasHeadtracker"</span>
        </span>}
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">detections</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">hasMouse</span>": <span class="hljs-value"><span class="hljs-literal">true</span></span>,
        "<span class="hljs-attribute">hasKeyboard</span>": <span class="hljs-value"><span class="hljs-literal">true</span></span>,
        "<span class="hljs-attribute">hasTrackpad</span>": <span class="hljs-value"><span class="hljs-literal">false</span></span>,
        "<span class="hljs-attribute">hasHeadtracker</span>": <span class="hljs-value"><span class="hljs-literal">false</span>
    </span>}
</span>}
</code></pre></td></tr>
</tbody>
</table>

<h3 id="fluid-transforms-setmembershiptoarray">fluid.transforms.setMembershipToArray</h3>
<p><strong>Type:</strong> standardTransformFunction</p>
<p><strong>Description:</strong> This is inverse of <code>fluid.transforms.arrayToSetMembership</code>. This transformation was developed to accommodate a use case where a boolean list of system capabilities needed to be translated to an array containing only capabilities that were true.</p>
<p>It takes an object with a set of keys and where the value space only consist of two values (<code>presentValue</code>, <code>missingValue</code>). This is mapped to an array that only contains entries for which the input object has a <code>presentValue</code>. The actual entries output to the array are based on a map passed as <code>options</code> to the transformation.</p>
<p><strong>Invertibility:</strong> Partly invertible (into <code>arrayToSetMembership</code>)</p>
<p><strong>Syntax:</strong></p>
<p>If <code>presentValue</code> and <code>missingValue</code> are not defined they will default to: <code>true</code> and <code>false</code>, respectively.</p>
<pre class="highlight"><code class="hljs r">transform: {
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"fluid.transforms.setMembershipToArray"</span>,
    <span class="hljs-string">"inputPath"</span>: &lt;standard inputPath&gt;,
    <span class="hljs-string">"outputPath"</span>: &lt;standard outputPath&gt;
    <span class="hljs-string">"presentValue"</span>: &lt;Value indicating that an entry should be <span class="hljs-keyword">in</span> output array&gt;,
    <span class="hljs-string">"missingValue"</span>: &lt;Value indicating that an entry should not be <span class="hljs-keyword">in</span> output array&gt;,
    <span class="hljs-string">"options"</span>: {
        <span class="hljs-string">"inputObjectKey1"</span>: <span class="hljs-string">"outputArrayValue1"</span>,
        (<span class="hljs-keyword">...</span>)
        <span class="hljs-string">"inputObjectKeyN"</span>: <span class="hljs-string">"outputArrayValueN"</span>,
    }
}
</code></pre><p><strong>Examples:</strong></p>
<p><strong>Example 1: Standard Usage</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">detections</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">hasMouse</span>": <span class="hljs-value"><span class="hljs-string">"supported"</span></span>,
        "<span class="hljs-attribute">hasKeyboard</span>": <span class="hljs-value"><span class="hljs-string">"supported"</span></span>,
        "<span class="hljs-attribute">hasTrackpad</span>": <span class="hljs-value"><span class="hljs-string">"not supported"</span></span>,
        "<span class="hljs-attribute">hasHeadtracker</span>": <span class="hljs-value"><span class="hljs-string">"not supported"</span>
    </span>}
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.setMembershipToArray"</span></span>,
        "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"detections"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"controls"</span></span>,
        "<span class="hljs-attribute">presentValue</span>": <span class="hljs-value"><span class="hljs-string">"supported"</span></span>,
        "<span class="hljs-attribute">missingValue</span>": <span class="hljs-value"><span class="hljs-string">"not supported"</span></span>,
        "<span class="hljs-attribute">options</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">hasMouse</span>": <span class="hljs-value"><span class="hljs-string">"mouse"</span></span>,
            "<span class="hljs-attribute">hasKeyboard</span>": <span class="hljs-value"><span class="hljs-string">"keyboard"</span></span>,
            "<span class="hljs-attribute">hasTrackpad</span>": <span class="hljs-value"><span class="hljs-string">"trackpad"</span></span>,
            "<span class="hljs-attribute">hasHeadtracker</span>": <span class="hljs-value"><span class="hljs-string">"headtracker"</span>
        </span>}
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">controls</span>": <span class="hljs-value">[ <span class="hljs-string">"mouse"</span>, <span class="hljs-string">"keyboard"</span> ]
</span>}
</code></pre></td></tr>
</tbody>
</table>


<p><strong>Example 2: Not defining presentValue and missingValue</strong></p>
<table><thead>
</thead><tbody>
<tr><th>source</th><th>rule</th><th>Output</th></tr>
<tr><td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">detections</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">hasMouse</span>": <span class="hljs-value"><span class="hljs-literal">true</span></span>,
        "<span class="hljs-attribute">hasKeyboard</span>": <span class="hljs-value"><span class="hljs-literal">true</span></span>,
        "<span class="hljs-attribute">hasTrackpad</span>": <span class="hljs-value"><span class="hljs-literal">false</span></span>,
        "<span class="hljs-attribute">hasHeadtracker</span>": <span class="hljs-value"><span class="hljs-literal">false</span>
    </span>}
</span>}
</code></pre></td>
<td><pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">transform</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"fluid.transforms.setMembershipToArray"</span></span>,
        "<span class="hljs-attribute">inputPath</span>": <span class="hljs-value"><span class="hljs-string">"detections"</span></span>,
        "<span class="hljs-attribute">outputPath</span>": <span class="hljs-value"><span class="hljs-string">"controls"</span></span>,
        "<span class="hljs-attribute">options</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">hasMouse</span>": <span class="hljs-value"><span class="hljs-string">"mouse"</span></span>,
            "<span class="hljs-attribute">hasKeyboard</span>": <span class="hljs-value"><span class="hljs-string">"keyboard"</span></span>,
            "<span class="hljs-attribute">hasTrackpad</span>": <span class="hljs-value"><span class="hljs-string">"trackpad"</span></span>,
            "<span class="hljs-attribute">hasHeadtracker</span>": <span class="hljs-value"><span class="hljs-string">"headtracker"</span>
        </span>}
    </span>}
</span>}
</code></pre></td><td>
<pre class="highlight"><code class="hljs json">
{
    "<span class="hljs-attribute">controls</span>": <span class="hljs-value">[ <span class="hljs-string">"mouse"</span>, <span class="hljs-string">"keyboard"</span> ]
</span>}
</code></pre></td></tr>
</tbody>
</table>
                        </div>
                    </div>

                    <footer class="row infusion-docs-footer">
                        <p class="infusion-docs-footerInfusion">Infusion is created by the <a href="http://fluidproject.org/" target="_blank">Fluid Project</a>,<br/>
                        a project of the <a href="http://idrc.ocad.ca/" target="_blank">Inclusive Design Research Centre</a> at <a href="http://www.ocadu.ca/" target="_blank">OCAD University</a>, funded by a grant from <a href="http://www.mellon.org/" target="_blank">The Andrew W. Mellon Foundation</a>.</p>
                    </footer>

                </article>

            </div>


        </div> <!-- end container -->
        <script>
            fluid.docs.onLoad();
        </script>

    </body>

</html>
